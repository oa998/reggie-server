import{c as Gt,l as Qt,a as w,m as Zt,d as U,j as ge,f as T,t as ct,o as ue}from"../chunks/C8UaBItH.js";import{a as Ye,H as Dt,b1 as Pt,h as Z,X as Re,a5 as zt,I as Ze,l,ak as $t,K as ea,Z as St,a9 as Be,e as Se,J as ta,ae as aa,W as kt,c as Ae,b2 as pe,b as dt,s as sa,aA as ra,aR as na,ac as ht,b3 as ia,b4 as oa,ap as de,F as Mt,b5 as la,r as At,p as Rt,b6 as nt,E as ca,b7 as da,b8 as ua,ab as fa,d as va,a7 as ga,b9 as ha,a0 as ma,ba as pa,G as ya,an as ba,bb as _a,aG as xa,i as fe,C as wa,bc as Sa,t as $,x as ee,y as m,n as Y,A as E,z as v,v as j,aI as G,bd as Lt,g as Je,aq as p,be as mt,w as J,aH as F,Y as ye,au as $e,bf as Ht,bg as ke,bh as et}from"../chunks/BAePK31o.js";import{s as Q}from"../chunks/7fA857NR.js";import{l as ne,p as V,s as ae,i as B,b as Ot,c as pt,a as ka,d as Ma}from"../chunks/C6YJISb6.js";import{b as ut,c as ve,s as Ca,d as re,a as Ea,r as Ia}from"../chunks/CNLmrsxn.js";import{i as Ve}from"../chunks/PBdh2ieK.js";import{B as Na}from"../chunks/NB-qxM5S.js";import{d as Ta,g as ft,w as jt,a as Da,o as Pa}from"../chunks/DA_Jy5tn.js";function za(t,e){return e}function Aa(t,e,a){for(var s=[],n=e.length,i,r=e.length,o=0;o<n;o++){let S=e[o];Rt(S,()=>{if(i){if(i.pending.delete(S),i.done.add(S),i.pending.size===0){var h=t.outrogroups;vt(ht(i.done)),h.delete(i),h.size===0&&(t.outrogroups=null)}}else r-=1},!1)}if(r===0){var c=s.length===0&&a!==null;if(c){var b=a,f=b.parentNode;fa(f),f.append(b),t.items.clear()}vt(e,!c)}else i={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(i)}function vt(t,e=!0){for(var a=0;a<t.length;a++)va(t[a],e)}var Ct;function Me(t,e,a,s,n,i=null){var r=t,o=new Map,c=(e&Pt)!==0;if(c){var b=t;r=Z?Re(zt(b)):b.appendChild(Ye())}Z&&Ze();var f=null,S=ra(()=>{var _=a();return na(_)?_:_==null?[]:ht(_)}),h,d=!0;function y(){u.fallback=f,Ra(u,h,r,e,s),f!==null&&(h.length===0?(f.f&pe)===0?At(f):(f.f^=pe,We(f,null,r)):Rt(f,()=>{f=null}))}var g=Dt(()=>{h=l(S);var _=h.length;let x=!1;if(Z){var N=$t(r)===ea;N!==(_===0)&&(r=St(),Re(r),Be(!1),x=!0)}for(var D=new Set,A=Ae,k=sa(),P=0;P<_;P+=1){Z&&Se.nodeType===ta&&Se.data===aa&&(r=Se,x=!0,Be(!1));var O=h[P],z=s(O,P),R=d?null:o.get(z);R?(R.v&&kt(R.v,O),R.i&&kt(R.i,P),k&&A.skipped_effects.delete(R.e)):(R=La(o,d?r:Ct??=Ye(),O,z,P,n,e,a),d||(R.e.f|=pe),o.set(z,R)),D.add(z)}if(_===0&&i&&!f&&(d?f=dt(()=>i(r)):(f=dt(()=>i(Ct??=Ye())),f.f|=pe)),Z&&_>0&&Re(St()),!d)if(k){for(const[M,L]of o)D.has(M)||A.skipped_effects.add(L.e);A.oncommit(y),A.ondiscard(()=>{})}else y();x&&Be(!0),l(S)}),u={effect:g,items:o,outrogroups:null,fallback:f};d=!1,Z&&(r=Se)}function Fe(t){for(;t!==null&&(t.f&da)===0;)t=t.next;return t}function Ra(t,e,a,s,n){var i=(s&ua)!==0,r=e.length,o=t.items,c=Fe(t.effect.first),b,f=null,S,h=[],d=[],y,g,u,_;if(i)for(_=0;_<r;_+=1)y=e[_],g=n(y,_),u=o.get(g).e,(u.f&pe)===0&&(u.nodes?.a?.measure(),(S??=new Set).add(u));for(_=0;_<r;_+=1){if(y=e[_],g=n(y,_),u=o.get(g).e,t.outrogroups!==null)for(const R of t.outrogroups)R.pending.delete(u),R.done.delete(u);if((u.f&pe)!==0)if(u.f^=pe,u===c)We(u,null,a);else{var x=f?f.next:c;u===t.effect.last&&(t.effect.last=u.prev),u.prev&&(u.prev.next=u.next),u.next&&(u.next.prev=u.prev),be(t,f,u),be(t,u,x),We(u,x,a),f=u,h=[],d=[],c=Fe(f.next);continue}if((u.f&nt)!==0&&(At(u),i&&(u.nodes?.a?.unfix(),(S??=new Set).delete(u))),u!==c){if(b!==void 0&&b.has(u)){if(h.length<d.length){var N=d[0],D;f=N.prev;var A=h[0],k=h[h.length-1];for(D=0;D<h.length;D+=1)We(h[D],N,a);for(D=0;D<d.length;D+=1)b.delete(d[D]);be(t,A.prev,k.next),be(t,f,A),be(t,k,N),c=N,f=k,_-=1,h=[],d=[]}else b.delete(u),We(u,c,a),be(t,u.prev,u.next),be(t,u,f===null?t.effect.first:f.next),be(t,f,u),f=u;continue}for(h=[],d=[];c!==null&&c!==u;)(b??=new Set).add(c),d.push(c),c=Fe(c.next);if(c===null)continue}(u.f&pe)===0&&h.push(u),f=u,c=Fe(u.next)}if(t.outrogroups!==null){for(const R of t.outrogroups)R.pending.size===0&&(vt(ht(R.done)),t.outrogroups?.delete(R));t.outrogroups.size===0&&(t.outrogroups=null)}if(c!==null||b!==void 0){var P=[];if(b!==void 0)for(u of b)(u.f&nt)===0&&P.push(u);for(;c!==null;)(c.f&nt)===0&&c!==t.fallback&&P.push(c),c=Fe(c.next);var O=P.length;if(O>0){var z=(s&Pt)!==0&&r===0?a:null;if(i){for(_=0;_<O;_+=1)P[_].nodes?.a?.measure();for(_=0;_<O;_+=1)P[_].nodes?.a?.fix()}Aa(t,P,z)}}i&&ca(()=>{if(S!==void 0)for(u of S)u.nodes?.a?.apply()})}function La(t,e,a,s,n,i,r,o){var c=(r&ia)!==0?(r&oa)===0?de(a,!1,!1):Mt(a):null,b=(r&la)!==0?Mt(n):null;return{v:c,i:b,e:dt(()=>(i(e,c??a,b??n,o),()=>{t.delete(s)}))}}function We(t,e,a){if(t.nodes)for(var s=t.nodes.start,n=t.nodes.end,i=e&&(e.f&pe)===0?e.nodes.start:a;s!==null;){var r=ga(s);if(i.before(s),s===n)return;s=r}}function be(t,e,a){e===null?t.effect.first=a:e.next=a,a===null?t.effect.last=e:a.prev=e}function se(t,e,a,s,n){Z&&Ze();var i=e.$$slots?.[a],r=!1;i===!0&&(i=e.children,r=!0),i===void 0?n!==null&&n(t):i(t,r?()=>s:s)}function Ha(t,e,a,s,n,i){let r=Z;Z&&Ze();var o=null;Z&&Se.nodeType===ha&&(o=Se,Ze());var c=Z?Se:t,b=new Na(c,!1);Dt(()=>{const f=e()||null;var S=pa;if(f===null){b.ensure(null,null);return}return b.ensure(f,h=>{if(f){if(o=Z?o:document.createElementNS(S,f),Gt(o,o),s){Z&&Qt(f)&&o.append(document.createComment(""));var d=Z?zt(o):o.appendChild(Ye());Z&&(d===null?Be(!1):Re(d)),s(o,d)}ya.nodes.end=o,h.before(o)}Z&&Re(h)}),()=>{}},ma),ba(()=>{}),r&&(Be(!0),Re(c))}function tt(t,e,a=e){var s=new WeakSet;_a(t,"input",async n=>{var i=n?t.defaultValue:t.value;if(i=it(t)?ot(i):i,a(i),Ae!==null&&s.add(Ae),await xa(),i!==(i=e())){var r=t.selectionStart,o=t.selectionEnd,c=t.value.length;if(t.value=i??"",o!==null){var b=t.value.length;r===o&&o===c&&b>c?(t.selectionStart=b,t.selectionEnd=b):(t.selectionStart=r,t.selectionEnd=Math.min(o,b))}}}),(Z&&t.defaultValue!==t.value||fe(e)==null&&t.value)&&(a(it(t)?ot(t.value):t.value),Ae!==null&&s.add(Ae)),wa(()=>{var n=e();if(t===document.activeElement){var i=Sa??Ae;if(s.has(i))return}it(t)&&n===ot(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}function it(t){var e=t.type;return e==="number"||e==="range"}function ot(t){return t===""?null:+t}const Oa={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const ja=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const Et=(...t)=>t.filter((e,a,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===a).join(" ").trim();var Fa=Zt("<svg><!><!></svg>");function le(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]),s=ne(a,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);$(e,!1);let n=V(e,"name",8,void 0),i=V(e,"color",8,"currentColor"),r=V(e,"size",8,24),o=V(e,"strokeWidth",8,2),c=V(e,"absoluteStrokeWidth",8,!1),b=V(e,"iconNode",24,()=>[]);Ve();var f=Fa();ut(f,(d,y,g)=>({...Oa,...d,...s,width:r(),height:r(),stroke:i(),"stroke-width":y,class:g}),[()=>ja(s)?void 0:{"aria-hidden":"true"},()=>(Y(c()),Y(o()),Y(r()),fe(()=>c()?Number(o())*24/Number(r()):o())),()=>(Y(Et),Y(n()),Y(a),fe(()=>Et("lucide-icon","lucide",n()?`lucide-${n()}`:"",a.class)))]);var S=m(f);Me(S,1,b,za,(d,y)=>{var g=G(()=>Lt(l(y),2));let u=()=>l(g)[0],_=()=>l(g)[1];var x=U(),N=j(x);Ha(N,u,!0,(D,A)=>{ut(D,()=>({..._()}))}),w(d,x)});var h=E(S);se(h,e,"default",{},null),v(f),w(t,f),ee()}function Ft(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M20 6 9 17l-5-5"}]];le(t,ae({name:"check"},()=>a,{get iconNode(){return s},children:(n,i)=>{var r=U(),o=j(r);se(o,e,"default",{},null),w(n,r)},$$slots:{default:!0}}))}function yt(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);const s=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];le(t,ae({name:"circle-alert"},()=>a,{get iconNode(){return s},children:(n,i)=>{var r=U(),o=j(r);se(o,e,"default",{},null),w(n,r)},$$slots:{default:!0}}))}function Wa(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];le(t,ae({name:"file-text"},()=>a,{get iconNode(){return s},children:(n,i)=>{var r=U(),o=j(r);se(o,e,"default",{},null),w(n,r)},$$slots:{default:!0}}))}function Ba(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"}]];le(t,ae({name:"folder-open"},()=>a,{get iconNode(){return s},children:(n,i)=>{var r=U(),o=j(r);se(o,e,"default",{},null),w(n,r)},$$slots:{default:!0}}))}function Ja(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}],["path",{d:"M12 22V12"}],["polyline",{points:"3.29 7 12 12 20.71 7"}],["path",{d:"m7.5 4.27 9 5.15"}]];le(t,ae({name:"package"},()=>a,{get iconNode(){return s},children:(n,i)=>{var r=U(),o=j(r);se(o,e,"default",{},null),w(n,r)},$$slots:{default:!0}}))}function Va(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);const s=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1"}]];le(t,ae({name:"pause"},()=>a,{get iconNode(){return s},children:(n,i)=>{var r=U(),o=j(r);se(o,e,"default",{},null),w(n,r)},$$slots:{default:!0}}))}function Ua(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}]];le(t,ae({name:"pen"},()=>a,{get iconNode(){return s},children:(n,i)=>{var r=U(),o=j(r);se(o,e,"default",{},null),w(n,r)},$$slots:{default:!0}}))}function qa(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z"}]];le(t,ae({name:"play"},()=>a,{get iconNode(){return s},children:(n,i)=>{var r=U(),o=j(r);se(o,e,"default",{},null),w(n,r)},$$slots:{default:!0}}))}function Wt(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];le(t,ae({name:"plus"},()=>a,{get iconNode(){return s},children:(n,i)=>{var r=U(),o=j(r);se(o,e,"default",{},null),w(n,r)},$$slots:{default:!0}}))}function Xa(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];le(t,ae({name:"rotate-ccw"},()=>a,{get iconNode(){return s},children:(n,i)=>{var r=U(),o=j(r);se(o,e,"default",{},null),w(n,r)},$$slots:{default:!0}}))}function Ka(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);const s=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]];le(t,ae({name:"square"},()=>a,{get iconNode(){return s},children:(n,i)=>{var r=U(),o=j(r);se(o,e,"default",{},null),w(n,r)},$$slots:{default:!0}}))}function bt(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];le(t,ae({name:"trash-2"},()=>a,{get iconNode(){return s},children:(n,i)=>{var r=U(),o=j(r);se(o,e,"default",{},null),w(n,r)},$$slots:{default:!0}}))}function Ue(t,e){const a=ne(e,["children","$$slots","$$events","$$legacy"]);const s=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];le(t,ae({name:"x"},()=>a,{get iconNode(){return s},children:(n,i)=>{var r=U(),o=j(r);se(o,e,"default",{},null),w(n,r)},$$slots:{default:!0}}))}var Ya=T('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"><div class="w-full max-w-2xl rounded-lg bg-white shadow-xl"><div class="flex items-center justify-between border-b border-gray-200 px-4 py-3"><h2 class="text-lg font-medium text-gray-900"> </h2> <button class="rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600"><!></button></div> <div class="p-4"><textarea placeholder="Enter a detailed description of this scenario..." class="h-64 w-full resize-none rounded-lg border border-gray-300 p-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"></textarea></div> <div class="flex justify-end gap-2 border-t border-gray-200 px-4 py-3"><button class="rounded px-4 py-2 text-sm text-gray-600 hover:bg-gray-100">Cancel</button> <button class="rounded bg-blue-500 px-4 py-2 text-sm text-white hover:bg-blue-600">Save</button></div></div></div>');function Ga(t,e){$(e,!0);let a=F("");Je(()=>{p(a,e.description,!0)});function s(){e.onSave(l(a))}function n(){e.onClose()}function i(x){x.key==="Escape"&&e.onClose()}var r=Ya();r.__click=n;var o=m(r);o.__click=x=>x.stopPropagation(),o.__keydown=i;var c=m(o),b=m(c),f=m(b);v(b);var S=E(b,2);S.__click=function(...x){e.onClose?.apply(this,x)};var h=m(S);Ue(h,{size:20}),v(S),v(c);var d=E(c,2),y=m(d);mt(y),v(d);var g=E(d,2),u=m(g);u.__click=function(...x){e.onClose?.apply(this,x)};var _=E(u,2);_.__click=s,v(g),v(o),v(r),J(()=>Q(f,`${e.title??""} - Description`)),tt(y,()=>l(a),x=>p(a,x)),w(t,r),ee()}ge(["click","keydown"]);var Qa=T('<div class="flex items-center gap-2"><button class="flex items-center gap-1 rounded px-2 py-1 text-xs text-gray-600 hover:bg-gray-200 disabled:opacity-50" title="Reset to original"><!> Reset</button> <button class="flex items-center gap-1 rounded bg-blue-500 px-2 py-1 text-xs text-white hover:bg-blue-600 disabled:opacity-50" title="Save changes (Cmd/Ctrl+S)"><!> Save</button></div>'),Za=T('<div class="absolute bottom-0 left-0 right-0 flex items-center gap-2 bg-red-500/90 px-3 py-2 text-xs text-white"><!> </div>'),$a=T('<div class="relative flex-1"><textarea class="h-full w-full resize-none bg-gray-900 p-3 font-mono text-sm text-gray-100 focus:outline-none" spellcheck="false"></textarea> <!></div>'),es=T('<div class="flex flex-1 items-center justify-center text-sm text-gray-400">Select a message to edit its JSON payload</div>'),ts=T('<div class="flex h-full flex-col border-t border-gray-200"><div class="flex items-center justify-between border-b border-gray-200 bg-gray-50 px-3 py-2"><span class="text-sm font-medium text-gray-700"><!></span> <!></div> <!></div>');function as(t,e){$(e,!0);let a=F(""),s=F(null),n=F(null);Je(()=>{e.payload?(p(a,JSON.stringify(e.payload,null,2),!0),p(n,structuredClone(e.payload),!0),p(s,null)):(p(a,""),p(n,null),p(s,null))});function i(){try{const k=JSON.parse(l(a));return typeof k.className!="string"||typeof k.topic!="string"||typeof k.attributes!="object"||typeof k.message!="object"?(p(s,"Invalid structure: requires className, topic, attributes, and message"),null):(p(s,null),k)}catch(k){return p(s,k instanceof Error?k.message:"Invalid JSON",!0),null}}function r(){i()}function o(){const k=i();k&&e.onSave(k)}function c(){l(n)&&(p(a,JSON.stringify(l(n),null,2),!0),p(s,null))}function b(k){(k.metaKey||k.ctrlKey)&&k.key==="s"&&(k.preventDefault(),o())}const f=G(()=>e.payload&&l(a)!==JSON.stringify(e.payload,null,2));var S=ts(),h=m(S),d=m(h),y=m(d);{var g=k=>{var P=ct();J(()=>Q(P,`Editing: ${e.payload.className??""}`)),w(k,P)},u=k=>{var P=ct("JSON Editor");w(k,P)};B(y,k=>{e.payload?k(g):k(u,!1)})}v(d);var _=E(d,2);{var x=k=>{var P=Qa(),O=m(P);O.__click=c;var z=m(O);Xa(z,{size:12}),ye(),v(O);var R=E(O,2);R.__click=o;var M=m(R);Ft(M,{size:12}),ye(),v(R),v(P),J(()=>{O.disabled=!l(f),R.disabled=!!l(s)||!l(f)}),w(k,P)};B(_,k=>{e.payload&&k(x)})}v(h);var N=E(h,2);{var D=k=>{var P=$a(),O=m(P);mt(O),O.__input=r,O.__keydown=b;var z=E(O,2);{var R=M=>{var L=Za(),W=m(L);yt(W,{size:14});var C=E(W);v(L),J(()=>Q(C,` ${l(s)??""}`)),w(M,L)};B(z,M=>{l(s)&&M(R)})}v(P),tt(O,()=>l(a),M=>p(a,M)),w(k,P)},A=k=>{var P=es();w(k,P)};B(N,k=>{e.payload?k(D):k(A,!1)})}v(S),w(t,S),ee()}ge(["click","input","keydown"]);const Ce="",ss=`${Ce}/publish`;async function rs(t){try{const e=await fetch(ss,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});let a;if(!e.ok)try{a=await e.text()}catch{}return{ok:e.ok,status:e.status,statusText:e.statusText,errorBody:a}}catch(e){return{ok:!1,status:0,statusText:e instanceof Error?e.message:"Network error"}}}async function ns(){const t=await fetch(`${Ce}/scenarios`);if(!t.ok)throw new Error(`Failed to fetch scenarios: ${t.statusText}`);return t.json()}async function is(t){const e=await fetch(`${Ce}/scenarios`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Failed to save scenario: ${e.statusText}`);return e.json()}async function os(){const t=await fetch(`${Ce}/message-samples`);if(!t.ok)throw new Error(`Failed to fetch message samples: ${t.statusText}`);return t.json()}async function ls(t){const e=await fetch(`${Ce}/message-samples`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Failed to save message sample: ${e.statusText}`);return e.json()}async function cs(t){const e=await fetch(`${Ce}/scenarios/${t}`,{method:"DELETE"});if(!e.ok)throw new Error(`Failed to delete scenario: ${e.statusText}`)}async function ds(t){const e=await fetch(`${Ce}/message-samples/${t}`,{method:"DELETE"});if(!e.ok)throw new Error(`Failed to delete message sample: ${e.statusText}`)}class us{#e=F($e([]));get samples(){return l(this.#e)}set samples(e){p(this.#e,e,!0)}#t=F(!0);get isLoading(){return l(this.#t)}set isLoading(e){p(this.#t,e,!0)}#a=F(null);get error(){return l(this.#a)}set error(e){p(this.#a,e,!0)}constructor(){typeof window<"u"&&this.init()}async init(){try{this.isLoading=!0,this.error=null,this.samples=await os()}catch(e){this.error=e instanceof Error?e.message:"Failed to load message samples",console.error("Failed to load message samples:",e)}finally{this.isLoading=!1}}async upsertSample(e){const s=this.samples.findIndex(n=>n.messageId===e.messageId)===-1;s?this.samples=[...this.samples,e]:this.samples=this.samples.map(n=>n.messageId===e.messageId?e:n);try{const n=await ls(e);return this.samples=this.samples.map(i=>i.messageId===n.messageId?n:i),n}catch(n){throw s&&(this.samples=this.samples.filter(i=>i.messageId!==e.messageId)),n}}async reload(){await this.init()}async deleteSample(e){const a=this.samples.find(s=>s.messageId===e);this.samples=this.samples.filter(s=>s.messageId!==e);try{await ds(e)}catch(s){throw a&&(this.samples=[...this.samples,a]),s}}}const we=new us;var fs=T('<div draggable="true" class="flex cursor-grab items-center gap-2 rounded-lg border border-gray-200 bg-white p-3 shadow-sm transition-shadow hover:shadow-md active:cursor-grabbing" title="Double-click to edit"><div><!></div> <div class="min-w-0 flex-1"><div class="truncate text-sm font-medium text-gray-900"> </div> <div class="truncate text-xs text-gray-500"> </div></div></div>'),vs=T('<div class="py-4 text-center text-sm text-gray-400">Loading templates...</div>'),gs=T('<div class="py-4 text-center text-sm text-red-500"> </div>'),hs=T('<div class="py-4 text-center text-sm text-gray-400">No message templates yet.<br/>Click "Add Message Type" to create one.</div>'),ms=T('<div class="flex h-full flex-col bg-gray-50 p-3"><h2 class="mb-3 text-sm font-semibold text-gray-700">Message Templates</h2> <button class="mb-3 flex items-center justify-center gap-2 rounded-lg border-2 border-dashed border-gray-300 bg-white px-3 py-2 text-sm text-gray-600 transition-colors hover:border-blue-400 hover:bg-blue-50 hover:text-blue-600"><!> Add Message Type</button> <div class="flex flex-col gap-2"></div> <!></div>');function ps(t,e){$(e,!0);const a=["bg-blue-500","bg-green-500","bg-amber-500","bg-purple-500","bg-rose-500","bg-cyan-500"];function s(d){const y=d.split("").reduce((g,u)=>g+u.charCodeAt(0),0);return a[y%a.length]}function n(d,y){d.dataTransfer&&(d.dataTransfer.effectAllowed="copy",d.dataTransfer.setData("application/json",JSON.stringify(y)),d.dataTransfer.setData("text/plain",y.className))}function i(d){e.onEditSample(d)}var r=ms(),o=E(m(r),2);o.__click=function(...d){e.onCreateSample?.apply(this,d)};var c=m(o);Wt(c,{size:16}),ye(),v(o);var b=E(o,2);Me(b,21,()=>we.samples,d=>d.messageId,(d,y)=>{const g=G(()=>s(l(y).className));var u=fs();u.__dblclick=()=>i(l(y));var _=m(u),x=m(_);Ja(x,{size:16}),v(_);var N=E(_,2),D=m(N),A=m(D,!0);v(D);var k=E(D,2),P=m(k,!0);v(k),v(N),v(u),J(()=>{ve(_,1,`${l(g)??""} flex h-8 w-8 items-center justify-center rounded text-white`),Q(A,l(y).className),Q(P,l(y).topic)}),ue("dragstart",u,O=>n(O,l(y))),w(d,u)}),v(b);var f=E(b,2);{var S=d=>{var y=vs();w(d,y)},h=d=>{var y=U(),g=j(y);{var u=x=>{var N=gs(),D=m(N,!0);v(N),J(()=>Q(D,we.error)),w(x,N)},_=x=>{var N=U(),D=j(N);{var A=k=>{var P=hs();w(k,P)};B(D,k=>{we.samples.length===0&&k(A)},!0)}w(x,N)};B(g,x=>{we.error?x(u):x(_,!1)},!0)}w(d,y)};B(f,d=>{we.isLoading?d(S):d(h,!1)})}v(r),w(t,r),ee()}ge(["click","dblclick"]);var ys=T('<p class="text-xs text-gray-500"> </p>'),bs=T('<div class="absolute bottom-0 left-0 right-0 flex items-center gap-2 bg-red-500/90 px-3 py-2 text-xs text-white"><!> </div>'),_s=T('<button class="flex items-center gap-1 rounded px-4 py-2 text-sm text-red-600 hover:bg-red-50"><!> Delete</button> <div class="flex-1"></div>',1),xs=T('<div class="flex-1"></div>'),ws=T('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"><div class="flex max-h-[90vh] w-full max-w-2xl flex-col overflow-hidden rounded-lg bg-white shadow-xl"><div class="flex items-center justify-between border-b border-gray-200 px-4 py-3"><div><h2 class="text-lg font-medium text-gray-900"> </h2> <!></div> <button class="rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600"><!></button></div> <div class="relative flex-1 overflow-hidden"><textarea class="h-96 w-full resize-none bg-gray-900 p-4 font-mono text-sm text-gray-100 focus:outline-none" spellcheck="false"></textarea> <!></div> <div class="flex gap-2 border-t border-gray-200 px-4 py-3"><!> <button class="rounded px-4 py-2 text-sm text-gray-600 hover:bg-gray-100">Cancel</button> <button class="rounded bg-blue-500 px-4 py-2 text-sm text-white hover:bg-blue-600 disabled:opacity-50">Save</button></div></div></div>');function Ss(t,e){$(e,!0);const a=`{
  "className": "ExampleMessage",
  "topic": "orders-topic",
  "attributes": {
    "traceId": "123-456-7890"
  },
  "message": {
    "name": "stuff"
  }
}`;let s=F(""),n=F(null);Je(()=>{if(e.sample){const{className:C,topic:X,attributes:te,message:ie}=e.sample;p(s,JSON.stringify({className:C,topic:X,attributes:te,message:ie},null,2),!0)}else p(s,a);p(n,null)});function i(){try{const C=JSON.parse(l(s));return typeof C.className!="string"||typeof C.topic!="string"||typeof C.attributes!="object"||C.attributes===null||typeof C.message!="object"||C.message===null?(p(n,"Invalid structure: requires className, topic, attributes, and message"),null):(p(n,null),C)}catch(C){return p(n,C instanceof Error?C.message:"Invalid JSON",!0),null}}function r(){i()}function o(){const C=i();if(C){const X={...C,messageId:e.sample?.messageId??String(Date.now())};e.onSave(X)}}function c(){e.onClose()}function b(C){C.key==="Escape"&&e.onClose(),(C.metaKey||C.ctrlKey)&&C.key==="s"&&(C.preventDefault(),o())}var f=ws();f.__click=c;var S=m(f);S.__click=C=>C.stopPropagation(),S.__keydown=b;var h=m(S),d=m(h),y=m(d),g=m(y,!0);v(y);var u=E(y,2);{var _=C=>{var X=ys(),te=m(X);v(X),J(()=>Q(te,`ID: ${e.sample.messageId??""}`)),w(C,X)};B(u,C=>{e.sample&&C(_)})}v(d);var x=E(d,2);x.__click=function(...C){e.onClose?.apply(this,C)};var N=m(x);Ue(N,{size:20}),v(x),v(h);var D=E(h,2),A=m(D);mt(A),A.__input=r,A.__keydown=b;var k=E(A,2);{var P=C=>{var X=bs(),te=m(X);yt(te,{size:14});var ie=E(te);v(X),J(()=>Q(ie,` ${l(n)??""}`)),w(C,X)};B(k,C=>{l(n)&&C(P)})}v(D);var O=E(D,2),z=m(O);{var R=C=>{var X=_s(),te=j(X);te.__click=()=>e.onDelete(e.sample.messageId);var ie=m(te);bt(ie,{size:14}),ye(),v(te),ye(2),w(C,X)},M=C=>{var X=xs();w(C,X)};B(z,C=>{e.sample&&e.onDelete?C(R):C(M,!1)})}var L=E(z,2);L.__click=function(...C){e.onClose?.apply(this,C)};var W=E(L,2);W.__click=o,v(O),v(S),v(f),J(()=>{Q(g,e.sample?"Edit Message Sample":"Create Message Sample"),W.disabled=!!l(n)}),tt(A,()=>l(s),C=>p(s,C)),w(t,f),ee()}ge(["click","keydown","input"]);var ks=T('<button class="flex h-8 w-8 items-center justify-center rounded bg-amber-500 text-white hover:bg-amber-600" title="Pause (Space)"><!></button>'),Ms=T('<button class="flex h-8 w-8 items-center justify-center rounded bg-green-500 text-white hover:bg-green-600 disabled:opacity-50" title="Play (Space)"><!></button>'),Cs=T('<span class="flex items-center gap-1 text-red-500"><!> Error</span>'),Es=T('<span class="text-green-600">Playing...</span>'),Is=T('<span class="text-amber-600">Paused</span>'),Ns=T('<div class="flex items-center gap-3 w-52"><!> <button class="flex h-8 w-8 items-center justify-center rounded bg-gray-500 text-white hover:bg-gray-600 disabled:opacity-50" title="Stop"><!></button> <div class="flex items-center gap-2 text-sm"><!></div></div>');function Ts(t,e){$(e,!0);var a=Ns(),s=m(a);{var n=h=>{var d=ks();d.__click=function(...g){e.onPause?.apply(this,g)};var y=m(d);Va(y,{size:16}),v(d),w(h,d)},i=h=>{var d=Ms();d.__click=function(...g){e.onPlay?.apply(this,g)};var y=m(d);qa(y,{size:16}),v(d),J(()=>d.disabled=!e.hasMessages),w(h,d)};B(s,h=>{e.state.status==="playing"?h(n):h(i,!1)})}var r=E(s,2);r.__click=function(...h){e.onStop?.apply(this,h)};var o=m(r);Ka(o,{size:16}),v(r);var c=E(r,2),b=m(c);{var f=h=>{var d=Cs(),y=m(d);yt(y,{size:14}),ye(),v(d),w(h,d)},S=h=>{var d=U(),y=j(d);{var g=_=>{var x=Es();w(_,x)},u=_=>{var x=U(),N=j(x);{var D=A=>{var k=Is();w(A,k)};B(N,A=>{e.state.status==="paused"&&A(D)},!0)}w(_,x)};B(y,_=>{e.state.status==="playing"?_(g):_(u,!1)},!0)}w(h,d)};B(b,h=>{e.state.status==="error"?h(f):h(S,!1)})}v(c),v(a),J(()=>r.disabled=e.state.status==="idle"),w(t,a),ee()}ge(["click"]);var Ds=T('<div class="flex-shrink-0"><div></div> <div class="h-[calc(100%-6px)]"><!></div></div>');function Ps(t,e){$(e,!0);let a=V(e,"minHeight",3,128),s=V(e,"maxHeightRatio",3,.8),n=V(e,"initialHeightRatio",3,.5),i=F(0),r=F(!1),o=F(!1);Je(()=>{!l(o)&&typeof window<"u"&&(p(i,window.innerHeight*n()),p(o,!0))});function c(g){g.preventDefault(),p(r,!0);const u=g.clientY,_=l(i);function x(D){const A=u-D.clientY,k=window.innerHeight*s();p(i,Math.min(k,Math.max(a(),_+A)),!0)}function N(){p(r,!1),window.removeEventListener("mousemove",x),window.removeEventListener("mouseup",N)}window.addEventListener("mousemove",x),window.addEventListener("mouseup",N)}function b(){return l(r)}var f={getIsResizing:b},S=Ds(),h=m(S);h.__mousedown=c;var d=E(h,2),y=m(d);return Ca(y,()=>e.children),v(d),v(S),J(()=>{re(S,`height: ${l(i)??""}px;`),ve(h,1,`h-1.5 cursor-ns-resize border-t border-gray-200 bg-gray-100 hover:bg-blue-200 transition-colors
      ${l(r)?"bg-blue-300":""}`)}),w(t,S),ee(f)}ge(["mousedown"]);var zs=T('<div class="group flex items-center justify-between px-3 py-2 hover:bg-gray-100"><button> <span class="ml-1 text-xs text-gray-400"> </span></button> <button class="rounded p-1 text-gray-400 opacity-0 hover:bg-red-50 hover:text-red-500 group-hover:opacity-100" title="Delete scenario"><!></button></div>'),As=T('<div class="absolute right-0 top-full z-50 mt-1 w-64 rounded-lg border border-gray-200 bg-white py-1 shadow-lg"><button class="flex w-full items-center gap-2 px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-100"><!> New Scenario</button> <div class="my-1 border-t border-gray-100"></div> <!></div> <button class="fixed inset-0 z-40" aria-label="Close menu"></button>',1),Rs=T('<div class="relative"><button class="flex items-center gap-1 rounded px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100"><!> Scenarios</button> <!></div>');function Ls(t,e){$(e,!0);let a=F(!1);function s(){p(a,!l(a))}function n(){e.onNew(),p(a,!1)}function i(d){e.onSelect(d),p(a,!1)}function r(){p(a,!1)}var o={close:r},c=Rs(),b=m(c);b.__click=s;var f=m(b);Ba(f,{size:14}),ye(),v(b);var S=E(b,2);{var h=d=>{var y=As(),g=j(y),u=m(g);u.__click=n;var _=m(u);Wt(_,{size:14}),ye(),v(u);var x=E(u,4);Me(x,17,()=>e.scenarios,D=>D.id,(D,A)=>{var k=zs(),P=m(k);P.__click=()=>i(l(A).id);var O=m(P),z=E(O),R=m(z);v(z),v(P);var M=E(P,2);M.__click=()=>e.onDelete(l(A).id);var L=m(M);bt(L,{size:14}),v(M),v(k),J(()=>{ve(P,1,`flex-1 text-left text-sm
              ${l(A).id===e.currentScenarioId?"font-medium text-blue-600":"text-gray-700"}`),Q(O,`${l(A).name??""} `),Q(R,`(${l(A).messages.length??""})`)}),w(D,k)}),v(g);var N=E(g,2);N.__click=()=>p(a,!1),w(d,y)};B(S,d=>{l(a)&&d(h)})}return v(c),w(t,c),ee(o)}ge(["click"]);var Hs=T('<div class="max-h-32 overflow-auto rounded bg-gray-100 p-2 text-xs font-mono text-gray-700"> </div>'),Os=T('<div class="absolute top-full left-0 z-50 mt-2 w-72 rounded-lg border border-red-200 bg-white p-3 shadow-lg"><div class="mb-2 flex items-center justify-between"><span class="font-medium text-red-600"> </span> <button class="rounded p-0.5 text-gray-400 hover:bg-gray-100 hover:text-gray-600"><!></button></div> <div class="mb-2 text-sm text-gray-600"> </div> <!></div>');function js(t,e){$(e,!0);var a=Os();a.__click=h=>h.stopPropagation();var s=m(a),n=m(s),i=m(n);v(n);var r=E(n,2);r.__click=function(...h){e.onClose?.apply(this,h)};var o=m(r);Ue(o,{size:14}),v(r),v(s);var c=E(s,2),b=m(c,!0);v(c);var f=E(c,2);{var S=h=>{var d=Hs(),y=m(d,!0);v(d),J(()=>Q(y,e.result.errorBody)),w(h,d)};B(f,h=>{e.result.errorBody&&h(S)})}v(a),J(()=>{Q(i,`Error ${e.result.statusCode??""}`),Q(b,e.result.statusText)}),w(t,a),ee()}ge(["click"]);var Fs=T("<button></button> <!>",1),Ws=T('<div draggable="true" role="button" tabindex="0"><span class="truncate"> </span> <button class="ml-auto shrink-0 rounded p-0.5 hover:bg-white/20" title="Delete message"><!></button> <!></div>');function Bs(t,e){$(e,!0);const a=["bg-blue-500","bg-green-500","bg-amber-500","bg-purple-500","bg-rose-500","bg-cyan-500"];function s(z){const R=z.split("").reduce((M,L)=>M+L.charCodeAt(0),0);return a[R%a.length]}let n=F(!1),i=F(0),r=F(0),o=F(!1);function c(z){if(!z.dataTransfer)return;p(n,!0),p(i,z.clientX,!0),p(r,e.message.column,!0),z.dataTransfer.effectAllowed="move",z.dataTransfer.setData("text/plain",e.message.id);const R=document.createElement("div");R.style.opacity="0",document.body.appendChild(R),z.dataTransfer.setDragImage(R,0,0),setTimeout(()=>R.remove(),0)}function b(z){if(!l(n)||z.clientX===0)return;const R=z.clientX-l(i),M=Math.round(R/e.columnWidth),L=Math.min(30,Math.max(1,l(r)+M));e.onColumnChange(L)}function f(){p(n,!1)}function S(){e.onSelect()}function h(z){z.stopPropagation(),e.onDelete()}function d(z){z.stopPropagation(),e.result?.status==="error"&&p(o,!l(o))}function y(){p(o,!1)}const g=G(()=>s(e.message.payload.className)),u=G(()=>(e.message.column-1)*e.columnWidth+4),_=G(()=>e.columnWidth-8);var x=Ws();ue("click",Ht,()=>{l(o)&&p(o,!1)}),x.__dblclick=S,x.__click=function(...z){e.onSelect?.apply(this,z)},x.__keydown=z=>z.key==="Enter"&&e.onSelect();var N=m(x),D=m(N,!0);v(N);var A=E(N,2);A.__click=h;var k=m(A);Ue(k,{size:12}),v(A);var P=E(A,2);{var O=z=>{var R=Fs(),M=j(R);M.__click=d;var L=E(M,2);{var W=C=>{js(C,{get result(){return e.result},onClose:y})};B(L,C=>{l(o)&&e.result.status==="error"&&C(W)})}J(()=>{ve(M,1,`absolute -bottom-1 left-1/2 -translate-x-1/2 h-3 w-3 rounded-full border-2 border-white shadow-sm
        ${e.result.status==="success"?"bg-green-500":"bg-red-500 cursor-pointer"}`),Ea(M,"title",e.result.status==="success"?"Success":`Error: ${e.result.statusCode} ${e.result.statusText}`)}),w(z,R)};B(P,z=>{e.result&&z(O)})}v(x),J(()=>{ve(x,1,`absolute top-1 flex h-8 cursor-grab items-center gap-1 rounded px-2 text-xs text-white shadow transition-all select-none
    ${l(g)??""}
    ${e.isSelected?"ring-2 ring-white ring-offset-2":""}
    ${e.isSent?"opacity-50":""}
    ${l(n)?"cursor-grabbing opacity-75":""}`),re(x,`left: ${l(u)??""}px; width: ${l(_)??""}px;`),Q(D,e.message.payload.className)}),ue("dragstart",x,c),ue("drag",x,b),ue("dragend",x,f),w(t,x),ee()}ge(["dblclick","click","keydown"]);var Js=T('<div class="pointer-events-none absolute top-0 z-20"><div class="absolute inset-y-0 left-0 w-0.5 bg-red-500"></div> <div class="absolute -top-1 left-0 h-3 w-3 -translate-x-1/2 rotate-45 bg-red-500"></div></div>');function Vs(t,e){const a=G(()=>e.labelWidth+(e.currentColumn-1)*e.columnWidth);var s=U(),n=j(s);{var i=r=>{var o=Js();J(()=>re(o,`left: ${l(a)??""}px; width: ${e.columnWidth??""}px; height: ${e.height??""}px;`)),w(r,o)};B(n,r=>{e.currentColumn>0&&r(i)})}w(t,s)}var Us=T('<div class="flex shrink-0 items-center justify-center border-r border-gray-200 text-xs font-medium text-gray-500"> </div>'),qs=T('<div class="flex h-32 items-center justify-center text-sm text-gray-400">Drag messages here to build your scenario</div>'),Xs=T('<div><div class="sticky left-0 z-5 flex h-full shrink-0 items-center bg-white/90 px-2 text-xs font-medium text-gray-600 border-r border-gray-200"><span class="truncate"> </span></div> <div class="lane-content relative"></div></div>'),Ks=T('<div class="flex h-full flex-col"><div class="flex items-center justify-between border-b border-gray-200 bg-gray-50 px-3 py-2"><span class="text-sm font-medium text-gray-700">Timeline</span></div> <div role="application" tabindex="0"><div class="relative"><div class="sticky top-0 z-10 flex h-6 border-b border-gray-200 bg-gray-100"><div class="shrink-0 border-r border-gray-200"></div> <!></div> <div class="relative"><!> <!></div></div></div></div>');function Ys(t,e){$(e,!0);const a=120,s=120,n=30;let i=F(void 0),r=F(!1);const o=G(()=>{const M={};for(const L of e.messages){const W=L.payload.className;M[W]||(M[W]=[]),M[W].push(L)}return Object.entries(M).sort((L,W)=>L[0].localeCompare(W[0]))}),c=G(()=>Array.from({length:n},(M,L)=>L+1)),b=G(()=>n*a);function f(M){M.preventDefault(),M.dataTransfer&&(M.dataTransfer.dropEffect="copy"),p(r,!0)}function S(){p(r,!1)}function h(M){if(M.preventDefault(),p(r,!1),!M.dataTransfer||!l(i))return;const L=M.dataTransfer.getData("application/json");if(L)try{const W=JSON.parse(L),C=l(i).getBoundingClientRect(),X=l(i).scrollLeft,ie=M.clientX-C.left+X-s,_e=Math.min(n,Math.max(1,Math.ceil(ie/a)));e.onAddMessage(W,_e)}catch{console.error("Failed to parse dropped data")}}function d(M){(M.target===l(i)||M.target.classList.contains("lane")||M.target.classList.contains("lane-content"))&&e.onSelectMessage(null)}function y(M){const L=e.messages.find(W=>W.id===M);return L?L.column<=e.completedColumns:!1}var g=Ks(),u=E(m(g),2);u.__click=d;var _=m(u);re(_,`width: ${s+l(b)}px; min-height: 100%;`);var x=m(_),N=m(x);re(N,"width: 120px;");var D=E(N,2);Me(D,16,()=>l(c),M=>M,(M,L)=>{var W=Us();re(W,"width: 120px;");var C=m(W,!0);v(W),J(()=>Q(C,L)),w(M,W)}),v(x);var A=E(x,2),k=m(A);{var P=M=>{var L=qs();re(L,`width: ${s+l(b)}px;`),w(M,L)},O=M=>{var L=U(),W=j(L);Me(W,19,()=>l(o),([C,X])=>C,(C,X,te)=>{var ie=G(()=>Lt(l(X),2));let _e=()=>l(ie)[0],Le=()=>l(ie)[1];var xe=Xs();let He;var Ie=m(xe);re(Ie,"width: 120px;");var Xe=m(Ie),at=m(Xe,!0);v(Xe),v(Ie);var Ne=E(Ie,2);re(Ne,`width: ${l(b)??""}px;`),Me(Ne,21,Le,he=>he.id,(he,me)=>{{let st=G(()=>e.selectedMessageId===l(me).id),Ke=G(()=>y(l(me).id));Bs(he,{get message(){return l(me)},columnWidth:a,get isSelected(){return l(st)},get isSent(){return l(Ke)},get result(){return e.messageResults[l(me).id]},onSelect:()=>e.onSelectMessage(l(me).id),onDelete:()=>e.onDeleteMessage(l(me).id),onColumnChange:Oe=>e.onUpdateColumn(l(me).id,Oe)})}}),v(Ne),v(xe),J(()=>{He=ve(xe,1,"lane relative flex h-10 border-b border-gray-100",null,He,{"bg-gray-50":l(te)%2===1}),Q(at,_e())}),w(C,xe)}),w(M,L)};B(k,M=>{l(o).length===0?M(P):M(O,!1)})}var z=E(k,2);{var R=M=>{{let L=G(()=>l(o).length*40+24);Vs(M,{get currentColumn(){return e.currentColumn},columnWidth:a,labelWidth:s,get height(){return l(L)}})}};B(z,M=>{(e.isPlaying||e.currentColumn>0)&&M(R)})}v(A),v(_),v(u),Ot(u,M=>p(i,M),()=>l(i)),v(g),J(()=>ve(u,1,`relative flex-1 overflow-auto bg-white
			${l(r)?"bg-blue-50":""}`)),ue("dragover",u,f),ue("dragleave",u,S),ue("drop",u,h),w(t,g),ee()}ge(["click"]);class Gs{#e=F("idle");get status(){return l(this.#e)}set status(e){p(this.#e,e,!0)}#t=F(0);get currentColumn(){return l(this.#t)}set currentColumn(e){p(this.#t,e,!0)}#a=F(0);get completedColumns(){return l(this.#a)}set completedColumns(e){p(this.#a,e,!0)}#s=F($e([]));get errors(){return l(this.#s)}set errors(e){p(this.#s,e,!0)}#r=F($e({}));get messageResults(){return l(this.#r)}set messageResults(e){p(this.#r,e,!0)}abortController=null;get state(){return{status:this.status,currentColumn:this.currentColumn,completedColumns:this.completedColumns,errors:this.errors,messageResults:this.messageResults}}async play(e){if(this.status!=="playing"){if(this.status==="paused"){this.resume(e);return}this.status="playing",this.currentColumn=0,this.completedColumns=0,this.errors=[],this.messageResults={},this.abortController=new AbortController,await this.executeColumns(e,1)}}async resume(e){this.status="playing",this.abortController=new AbortController,await this.executeColumns(e,this.completedColumns+1)}pause(){this.status==="playing"&&(this.status="paused",this.abortController?.abort())}stop(){this.status="idle",this.currentColumn=0,this.completedColumns=0,this.errors=[],this.messageResults={},this.abortController?.abort()}async executeColumns(e,a){for(let s=a;s<=30;s++){if(this.abortController?.signal.aborted)return;const n=e.filter(o=>o.column===s);if(n.length===0)continue;this.currentColumn=s;const i=await Promise.all(n.map(async o=>{const c=await rs(o.payload);return{message:o,response:c}}));if(this.abortController?.signal.aborted)return;let r=!1;for(const{message:o,response:c}of i)c.ok?this.messageResults={...this.messageResults,[o.id]:{status:"success"}}:(this.messageResults={...this.messageResults,[o.id]:{status:"error",statusCode:c.status,statusText:c.statusText,errorBody:c.errorBody}},r=!0);if(r){this.status="error";const o=i.find(c=>!c.response.ok);o&&(console.log({failedMsg:o}),this.errors=i.filter(c=>!c.response.ok).map(c=>`Failed to send ${c.message.payload.className}`));return}this.completedColumns=s}this.status==="playing"&&(this.status="idle")}}const oe=new Gs;function It(){return crypto.randomUUID()}class Qs{#e=F($e([]));get scenarios(){return l(this.#e)}set scenarios(e){p(this.#e,e,!0)}#t=F(null);get currentScenarioId(){return l(this.#t)}set currentScenarioId(e){p(this.#t,e,!0)}#a=F(null);get selectedMessageId(){return l(this.#a)}set selectedMessageId(e){p(this.#a,e,!0)}#s=F(!0);get isLoading(){return l(this.#s)}set isLoading(e){p(this.#s,e,!0)}#r=F(null);get error(){return l(this.#r)}set error(e){p(this.#r,e,!0)}#n=G(()=>this.scenarios.find(e=>e.id===this.currentScenarioId)??null);get currentScenario(){return l(this.#n)}set currentScenario(e){p(this.#n,e)}#i=G(()=>this.currentScenario?.messages.find(e=>e.id===this.selectedMessageId)??null);get selectedMessage(){return l(this.#i)}set selectedMessage(e){p(this.#i,e)}constructor(){typeof window<"u"&&this.init()}async init(){try{this.isLoading=!0,this.error=null;const e=await ns();this.scenarios=e.map(a=>({...a,description:a.description??""})),this.scenarios.length===0?await this.createScenario("New Scenario"):this.currentScenarioId=this.scenarios[0].id}catch(e){this.error=e instanceof Error?e.message:"Failed to load scenarios",console.error("Failed to load scenarios:",e)}finally{this.isLoading=!1}}async persistScenario(e){try{await is(e)}catch(a){throw console.error("Failed to save scenario:",a),a}}async createScenario(e){const a={id:It(),name:e,description:"",messages:[]};return this.scenarios=[...this.scenarios,a],this.currentScenarioId=a.id,this.selectedMessageId=null,await this.persistScenario(a),a.id}async deleteScenario(e){this.scenarios=this.scenarios.filter(a=>a.id!==e),this.currentScenarioId===e&&(this.currentScenarioId=this.scenarios[0]?.id??null,this.selectedMessageId=null),await cs(e)}async renameScenario(e,a){const s=this.scenarios.find(i=>i.id===e);if(!s)return;const n={...s,name:a};this.scenarios=this.scenarios.map(i=>i.id===e?n:i),await this.persistScenario(n)}async updateDescription(e,a){const s=this.scenarios.find(i=>i.id===e);if(!s)return;const n={...s,description:a};this.scenarios=this.scenarios.map(i=>i.id===e?n:i),await this.persistScenario(n)}selectScenario(e){this.currentScenarioId=e,this.selectedMessageId=null}async addMessage(e,a=1){if(!this.currentScenarioId)return"";const s={id:It(),column:Math.min(30,Math.max(1,a)),payload:structuredClone(e)},n=this.scenarios.find(r=>r.id===this.currentScenarioId);if(!n)return"";const i={...n,messages:[...n.messages,s]};return this.scenarios=this.scenarios.map(r=>r.id===this.currentScenarioId?i:r),this.selectedMessageId=s.id,await this.persistScenario(i),s.id}async removeMessage(e){if(!this.currentScenarioId)return;const a=this.scenarios.find(n=>n.id===this.currentScenarioId);if(!a)return;const s={...a,messages:a.messages.filter(n=>n.id!==e)};this.scenarios=this.scenarios.map(n=>n.id===this.currentScenarioId?s:n),this.selectedMessageId===e&&(this.selectedMessageId=null),await this.persistScenario(s)}async updateMessage(e,a){if(!this.currentScenarioId)return;const s=this.scenarios.find(i=>i.id===this.currentScenarioId);if(!s)return;const n={...s,messages:s.messages.map(i=>i.id===e?{...i,payload:structuredClone(a)}:i)};this.scenarios=this.scenarios.map(i=>i.id===this.currentScenarioId?n:i),await this.persistScenario(n)}async updateColumn(e,a){if(!this.currentScenarioId)return;const s=this.scenarios.find(i=>i.id===this.currentScenarioId);if(!s)return;const n={...s,messages:s.messages.map(i=>i.id===e?{...i,column:Math.min(30,Math.max(1,a))}:i)};this.scenarios=this.scenarios.map(i=>i.id===this.currentScenarioId?n:i),await this.persistScenario(n)}selectMessage(e){this.selectedMessageId=e}async clearScenario(){if(!this.currentScenarioId)return;const e=this.scenarios.find(s=>s.id===this.currentScenarioId);if(!e)return;const a={...e,messages:[]};this.scenarios=this.scenarios.map(s=>s.id===this.currentScenarioId?a:s),this.selectedMessageId=null,await this.persistScenario(a)}}const H=new Qs;function Zs(t,e,a,s){var n,i,r=!1,o=a.length>=2,c=(y,g,u)=>{if(n=g,o&&(i=y),!r){let _=e(y,g,u);if(e.length<2)g(_);else return _}r=!1},b=Ta(t,c,s),f=!Array.isArray(t);function S(y){var g=a(y,i);f?(r=!0,t.set(g)):g.forEach((u,_)=>{r=!0,t[_].set(u)}),r=!1}var h=!1;function d(y){var g,u,_,x;if(h){x=y(ft(b)),n(x);return}var N=b.subscribe(D=>{h?g?u=!0:g=!0:_=D});x=y(_),h=!0,n(x),N(),h=!1,u&&(x=ft(b)),g&&S(x)}return{subscribe:b.subscribe,set(y){d(()=>y)},update:d}}const $s=20,Ee=jt([]),_t=jt(null),Ge=new Map,Nt=t=>{if(Ge.has(t))return;const e=setTimeout(()=>{Ge.delete(t),Jt(t)},1e3);Ge.set(t,e)},er=t=>{const e=Ge.get(t);e&&clearTimeout(e)};function Bt(t){t.id&&er(t.id),Ee.update(e=>e.map(a=>a.id===t.id?{...a,...t}:a))}function tr(t){Ee.update(e=>[t,...e].slice(0,$s))}function ar(t){ft(Ee).find(e=>e.id===t.id)?Bt(t):tr(t)}function sr(t){Ee.update(e=>(t?Nt(t):e.forEach(a=>{Nt(a.id)}),e.map(a=>a.id===t||t===void 0?{...a,visible:!1}:a)))}function Jt(t){Ee.update(e=>t===void 0?[]:e.filter(a=>a.id!==t))}function rr(t){_t.set(t)}function nr(t){let e;_t.update(a=>(e=t-(a||0),null)),Ee.update(a=>a.map(s=>({...s,pauseDuration:s.pauseDuration+e})))}const ir={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function or(t={}){return{toasts:Zs(Ee,a=>a.map(s=>({...t,...t[s.type],...s,duration:s.duration||t[s.type]?.duration||t?.duration||ir[s.type],style:[t.style,t[s.type]?.style,s.style].join(";")})),a=>a),pausedAt:_t}}const lr=t=>typeof t=="function",Tt=(t,e)=>lr(t)?t(e):t,cr=(()=>{let t=0;return()=>(t+=1,t.toString())})(),gt=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){const e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),dr=(t,e="blank",a)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...a,id:a?.id||cr()}),qe=t=>(e,a)=>{const s=dr(e,t,a);return ar(s),s.id},K=(t,e)=>qe("blank")(t,e);K.error=qe("error");K.success=qe("success");K.loading=qe("loading");K.custom=qe("custom");K.dismiss=t=>{sr(t)};K.remove=t=>Jt(t);K.promise=(t,e,a)=>{const s=K.loading(e.loading,{...a,...a?.loading});return t.then(n=>(K.success(Tt(e.success,n),{id:s,...a,...a?.success}),n)).catch(n=>{K.error(Tt(e.error,n),{id:s,...a,...a?.error})}),t};function ur(t,e,a){const{reverseOrder:s,gutter:n=8,defaultPosition:i}=a||{},r=e.filter(f=>(f.position||i)===(t.position||i)&&f.height),o=r.findIndex(f=>f.id===t.id),c=r.filter((f,S)=>S<o&&f.visible).length;return r.filter(f=>f.visible).slice(...s?[c+1]:[0,c]).reduce((f,S)=>f+(S.height||0)+n,0)}const fr={startPause(){rr(Date.now())},endPause(){nr(Date.now())},updateHeight:(t,e)=>{Bt({id:t,height:e})},calculateOffset:ur};function vr(t){const{toasts:e,pausedAt:a}=or(t),s=new Map;let n;const i=[a.subscribe(r=>{if(r){for(const[,o]of s)clearTimeout(o);s.clear()}n=r}),e.subscribe(r=>{if(n)return;const o=Date.now();for(const c of r){if(s.has(c.id)||c.duration===1/0)continue;const b=(c.duration||0)+c.pauseDuration-(o-c.createdAt);if(b<0)return c.visible&&K.dismiss(c.id),null;s.set(c.id,setTimeout(()=>K.dismiss(c.id),b))}})];return Da(()=>{for(const r of i)r()}),{toasts:e,handlers:fr}}var gr=T('<div class="svelte-1rwl7ho"></div>');function hr(t,e){let a=V(e,"primary",8,"#61d345"),s=V(e,"secondary",8,"#fff");var n=gr();let i;J(()=>i=re(n,"",i,{"--primary":a(),"--secondary":s()})),w(t,n)}var mr=T('<div class="svelte-tdvg6p"></div>');function pr(t,e){let a=V(e,"primary",8,"#ff4b4b"),s=V(e,"secondary",8,"#fff");var n=mr();let i;J(()=>i=re(n,"",i,{"--primary":a(),"--secondary":s()})),w(t,n)}var yr=T('<div class="svelte-1xo581e"></div>');function br(t,e){let a=V(e,"primary",8,"#616161"),s=V(e,"secondary",8,"#e0e0e0");var n=yr();let i;J(()=>i=re(n,"",i,{"--primary":a(),"--secondary":s()})),w(t,n)}var _r=T('<div class="animated svelte-qnoxya"> </div>'),xr=T('<div class="status svelte-qnoxya"><!></div>'),wr=T('<div class="indicator svelte-qnoxya"><!> <!></div>');function lt(t,e){$(e,!1);const a=de(),s=de(),n=de();let i=V(e,"toast",8);ke(()=>(l(a),l(s),l(n),Y(i())),()=>{(f=>{p(a,f.type),p(s,f.icon),p(n,f.iconTheme)})(i())}),et();var r=U(),o=j(r);{var c=f=>{var S=_r(),h=m(S,!0);v(S),J(()=>Q(h,l(s))),w(f,S)},b=f=>{var S=U(),h=j(S);{var d=g=>{var u=U(),_=j(u);pt(_,()=>l(s),(x,N)=>{N(x,{})}),w(g,u)},y=g=>{var u=U(),_=j(u);{var x=N=>{var D=wr(),A=m(D);br(A,ae(()=>l(n)));var k=E(A,2);{var P=O=>{var z=xr(),R=m(z);{var M=W=>{pr(W,ae(()=>l(n)))},L=W=>{hr(W,ae(()=>l(n)))};B(R,W=>{l(a)==="error"?W(M):W(L,!1)})}v(z),w(O,z)};B(k,O=>{l(a)!=="loading"&&O(P)})}v(D),w(N,D)};B(_,N=>{l(a)!=="blank"&&N(x)},!0)}w(g,u)};B(h,g=>{typeof l(s)<"u"?g(d):g(y,!1)},!0)}w(f,S)};B(o,f=>{typeof l(s)=="string"?f(c):f(b,!1)})}w(t,r),ee()}var Sr=T("<div><!></div>");function Qe(t,e){$(e,!1);let a=V(e,"toast",8);Ve();var s=Sr();ut(s,()=>({class:"message",...a().ariaProps}),void 0,void 0,void 0,"svelte-tb6am6");var n=m(s);{var i=o=>{var c=ct();J(()=>Q(c,(Y(a()),fe(()=>a().message)))),w(o,c)},r=o=>{var c=U(),b=j(c);pt(b,()=>a().message,(f,S)=>{S(f,{get toast(){return a()}})}),w(o,c)};B(n,o=>{Y(a()),fe(()=>typeof a().message=="string")?o(i):o(r,!1)})}v(s),w(t,s),ee()}var kr=T("<!> <!>",1),Mr=T("<div><!></div>");function Cr(t,e){$(e,!1);let a=V(e,"toast",8),s=V(e,"position",24,()=>{}),n=V(e,"style",8,""),i=V(e,"Component",24,()=>{}),r=de(),o=de();ke(()=>(Y(a()),Y(s()),gt),()=>{const d=(a().position||s()||"top-center").includes("top");p(r,d?1:-1);const[y,g]=gt()?["fadeIn","fadeOut"]:["enter","exit"];p(o,a().visible?y:g)}),et(),Ve();var c=Mr();let b;var f=m(c);{var S=d=>{var y=U(),g=j(y);pt(g,i,(u,_)=>{_(u,{$$slots:{icon:(x,N)=>{lt(x,{get toast(){return a()},slot:"icon"})},message:(x,N)=>{Qe(x,{get toast(){return a()},slot:"message"})}}})}),w(d,y)},h=d=>{var y=U(),g=j(y);se(g,e,"default",{get ToastIcon(){return lt},get ToastMessage(){return Qe},get toast(){return a()}},u=>{var _=kr(),x=j(_);lt(x,{get toast(){return a()}});var N=E(x,2);Qe(N,{get toast(){return a()}}),w(u,_)}),w(d,y)};B(f,d=>{i()?d(S):d(h,!1)})}v(c),J(()=>{ve(c,1,`base ${Y(a()),l(o),fe(()=>a().height?l(o):"transparent")??""} ${Y(a()),fe(()=>a().className||"")??""}`,"svelte-1g0yga0"),b=re(c,`${n()??""}; ${Y(a()),fe(()=>a().style)??""}`,b,{"--factor":l(r)})}),w(t,c),ee()}var Er=T("<div><!></div>");function Ir(t,e){$(e,!1);const a=de(),s=de(),n=de(),i=de();let r=V(e,"toast",8),o=V(e,"setHeight",8),c=de();Pa(()=>{o()(l(c).getBoundingClientRect().height)}),ke(()=>Y(r()),()=>{p(a,r().position?.includes("top")?0:null)}),ke(()=>Y(r()),()=>{p(s,r().position?.includes("bottom")?0:null)}),ke(()=>Y(r()),()=>{p(n,r().position?.includes("top")?1:-1)}),ke(()=>Y(r()),()=>{p(i,r().position?.includes("center")&&"center"||(r().position?.includes("right")||r().position?.includes("end"))&&"flex-end"||null)}),et(),Ve();var b=Er();let f,S;var h=m(b);{var d=g=>{Qe(g,{get toast(){return r()}})},y=g=>{var u=U(),_=j(u);se(_,e,"default",{get toast(){return r()}},x=>{Cr(x,{get toast(){return r()},get position(){return Y(r()),fe(()=>r().position)}})}),w(g,u)};B(h,g=>{Y(r()),fe(()=>r().type==="custom")?g(d):g(y,!1)})}v(b),Ot(b,g=>p(c,g),()=>l(c)),J(g=>{f=ve(b,1,"wrapper svelte-fsxqeu",null,f,g),S=re(b,"",S,{"--factor":l(n),"--offset":(Y(r()),fe(()=>r().offset)),top:l(a),bottom:l(s),"justify-content":l(i)})},[()=>({active:r().visible,transition:!gt()})]),w(t,b),ee()}var Nr=T('<div role="alert"></div>');function Tr(t,e){$(e,!1);const a=()=>Ma(S,"$toasts",s),[s,n]=ka();let i=V(e,"reverseOrder",8,!1),r=V(e,"position",8,"top-center"),o=V(e,"toastOptions",24,()=>{}),c=V(e,"gutter",8,8),b=V(e,"containerStyle",24,()=>{}),f=V(e,"containerClassName",24,()=>{});const{toasts:S,handlers:h}=vr(o());let d=de();ke(()=>(a(),Y(r()),Y(i()),Y(c())),()=>{p(d,a().map(g=>({...g,position:g.position||r(),offset:h.calculateOffset(g,a(),{reverseOrder:i(),gutter:c(),defaultPosition:r()})})))}),et(),Ve();var y=Nr();Me(y,5,()=>l(d),g=>g.id,(g,u)=>{Ir(g,{get toast(){return l(u)},setHeight:_=>h.updateHeight(l(u).id,_)})}),v(y),J(()=>{ve(y,1,`toaster ${(f()||"")??""}`,"svelte-yoigw"),re(y,b())}),ue("mouseenter",y,function(...g){h.startPause?.apply(this,g)}),ue("mouseleave",y,function(...g){h.endPause?.apply(this,g)}),w(t,y),ee(),n()}var Dr=T('<input type="text" class="w-40 rounded border border-gray-300 px-2 py-1 text-sm"/> <button class="rounded p-1 text-green-600 hover:bg-green-50"><!></button> <button class="rounded p-1 text-gray-400 hover:bg-gray-100"><!></button>',1),Pr=T('<span class="font-medium text-gray-700"> </span> <button class="rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600" title="Rename scenario"><!></button> <button title="Edit description"><!></button>',1),zr=T('<!> <div class="flex h-screen flex-col bg-gray-100"><header class="flex items-center justify-between border-b border-gray-200 bg-white px-4 py-2"><div class="flex items-center gap-4"><!> <div class="flex items-center gap-2"><!></div></div> <div class="flex items-center gap-2"><button class="flex items-center gap-1 rounded px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 disabled:opacity-50" title="Clear all messages"><!> Clear</button> <!></div></header> <div class="flex flex-1 overflow-hidden"><aside class="w-56 flex-shrink-0 overflow-y-auto border-r border-gray-200 bg-white"><!></aside> <main class="flex flex-1 flex-col overflow-hidden"><div class="flex-1 overflow-hidden"><!></div> <!></main></div></div> <!> <!>',1);function Br(t,e){$(e,!0);let a=F(!1),s=F(""),n=F(!1),i=F(!1),r=F(null);function o(){H.currentScenario&&oe.play(H.currentScenario.messages)}function c(){oe.pause()}function b(){oe.stop()}function f(I,q){H.addMessage(I,q)}function S(I){H.selectMessage(I)}function h(I){H.removeMessage(I)}function d(I,q){H.updateColumn(I,q)}function y(I){H.selectedMessageId&&(H.updateMessage(H.selectedMessageId,I),K.success("Message updated"))}function g(){const I=`Scenario ${H.scenarios.length+1}`;H.createScenario(I),K.success("New scenario created")}function u(I){H.selectScenario(I),oe.stop()}async function _(I){if(H.scenarios.length<=1){K.error("Cannot delete the last scenario");return}try{await H.deleteScenario(I),K.success("Scenario deleted")}catch(q){K.error(q instanceof Error?q.message:"Failed to delete scenario")}}function x(){H.clearScenario(),K.success("Scenario cleared")}function N(){H.currentScenario&&(p(s,H.currentScenario.name,!0),p(a,!0))}function D(){H.currentScenarioId&&l(s).trim()&&H.renameScenario(H.currentScenarioId,l(s).trim()),p(a,!1)}function A(){p(a,!1)}function k(){H.currentScenario&&p(n,!0)}function P(I){H.currentScenarioId&&(H.updateDescription(H.currentScenarioId,I),K.success("Description saved")),p(n,!1)}function O(){p(n,!1)}function z(I){p(r,I,!0),p(i,!0)}function R(){p(r,null),p(i,!0)}async function M(I){try{const q=l(r)!==null;await we.upsertSample(I),K.success(q?"Message sample updated":"Message sample created"),p(i,!1),p(r,null)}catch(q){K.error(q instanceof Error?q.message:"Failed to save message sample")}}function L(){p(i,!1),p(r,null)}async function W(I){try{await we.deleteSample(I),K.success("Message sample deleted"),p(i,!1),p(r,null)}catch(q){K.error(q instanceof Error?q.message:"Failed to delete message sample")}}function C(I){I.target instanceof HTMLTextAreaElement||I.target instanceof HTMLInputElement||(I.key===" "&&(I.preventDefault(),oe.status==="playing"?c():o()),(I.key==="Delete"||I.key==="Backspace")&&H.selectedMessageId&&h(H.selectedMessageId),I.key==="Escape"&&(H.selectMessage(null),p(n,!1),p(i,!1)))}Je(()=>{oe.status==="error"&&oe.errors.length&&oe.errors.forEach(I=>K.error(I))});var X=zr();ue("keydown",Ht,C);var te=j(X);Tr(te,{position:"bottom-right"});var ie=E(te,2),_e=m(ie),Le=m(_e),xe=m(Le);{let I=G(()=>!!H.currentScenario?.messages.length);Ts(xe,{get state(){return oe.state},get hasMessages(){return l(I)},onPlay:o,onPause:c,onStop:b})}var He=E(xe,2),Ie=m(He);{var Xe=I=>{var q=Dr(),ce=j(q);Ia(ce),ce.__keydown=ze=>{ze.key==="Enter"&&D(),ze.key==="Escape"&&A()};var Te=E(ce,2);Te.__click=D;var De=m(Te);Ft(De,{size:16}),v(Te);var je=E(Te,2);je.__click=A;var Pe=m(je);Ue(Pe,{size:16}),v(je),tt(ce,()=>l(s),ze=>p(s,ze)),w(I,q)},at=I=>{var q=Pr(),ce=j(q),Te=m(ce,!0);v(ce);var De=E(ce,2);De.__click=N;var je=m(De);Ua(je,{size:14}),v(De);var Pe=E(De,2);Pe.__click=k;var ze=m(Pe);Wa(ze,{size:14}),v(Pe),J(()=>{Q(Te,H.currentScenario?.name??"No Scenario"),ve(Pe,1,`rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600
              ${H.currentScenario?.description?"text-blue-500":""}`)}),w(I,q)};B(Ie,I=>{l(a)?I(Xe):I(at,!1)})}v(He),v(Le);var Ne=E(Le,2),he=m(Ne);he.__click=x;var me=m(he);bt(me,{size:14}),ye(),v(he);var st=E(he,2);Ls(st,{get scenarios(){return H.scenarios},get currentScenarioId(){return H.currentScenarioId},onNew:g,onSelect:u,onDelete:_}),v(Ne),v(_e);var Ke=E(_e,2),Oe=m(Ke),Vt=m(Oe);ps(Vt,{onEditSample:z,onCreateSample:R}),v(Oe);var xt=E(Oe,2),rt=m(xt),Ut=m(rt);{let I=G(()=>H.currentScenario?.messages??[]),q=G(()=>oe.status==="playing");Ys(Ut,{get messages(){return l(I)},get selectedMessageId(){return H.selectedMessageId},get currentColumn(){return oe.currentColumn},get completedColumns(){return oe.completedColumns},get isPlaying(){return l(q)},get messageResults(){return oe.messageResults},onAddMessage:f,onSelectMessage:S,onDeleteMessage:h,onUpdateColumn:d})}v(rt);var qt=E(rt,2);Ps(qt,{minHeight:128,maxHeightRatio:.8,initialHeightRatio:.64,children:(I,q)=>{{let ce=G(()=>H.selectedMessage?.payload??null);as(I,{get payload(){return l(ce)},onSave:y})}},$$slots:{default:!0}}),v(xt),v(Ke),v(ie);var wt=E(ie,2);{var Xt=I=>{{let q=G(()=>H.currentScenario?.name??"Scenario"),ce=G(()=>H.currentScenario?.description??"");Ga(I,{get title(){return l(q)},get description(){return l(ce)},onSave:P,onClose:O})}};B(wt,I=>{l(n)&&I(Xt)})}var Kt=E(wt,2);{var Yt=I=>{Ss(I,{get sample(){return l(r)},onSave:M,onDelete:W,onClose:L})};B(Kt,I=>{l(i)&&I(Yt)})}J(()=>he.disabled=!H.currentScenario?.messages.length),w(t,X),ee()}ge(["keydown","click"]);export{Br as component};
