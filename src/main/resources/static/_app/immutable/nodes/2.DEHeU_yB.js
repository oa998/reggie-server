import{c as us,l as fs,a as p,m as vs,d as V,j as ce,f as N,t as bt,o as ge}from"../chunks/C8UaBItH.js";import{a as it,H as Ft,b1 as Bt,h as ae,X as je,a5 as Wt,I as dt,l,ak as gs,K as hs,Z as zt,a9 as Ge,e as Te,J as ms,ae as ps,W as Pt,c as He,b2 as xe,b as _t,s as ys,aA as bs,aR as _s,ac as Ct,b3 as xs,b4 as ws,ap as fe,F as At,b5 as Ss,r as Jt,p as Vt,b6 as gt,E as ks,b7 as Cs,b8 as Ms,ab as Is,d as Es,a7 as Ns,b9 as Ts,a0 as Ds,ba as zs,G as Ps,an as As,bb as Rs,aG as Us,i as he,C as Ls,bc as Os,t as Z,x as ee,y as h,n as X,A as M,z as f,v as L,aI as Q,bd as qt,g as Fe,aq as g,be as Mt,w as W,aH as O,Y as we,au as Qe,bf as Kt,bg as De,bh as ct}from"../chunks/BAePK31o.js";import{s as $}from"../chunks/7fA857NR.js";import{l as ne,p as q,s as se,i as F,b as Xt,c as It,a as Hs,d as js}from"../chunks/C6YJISb6.js";import{b as xt,c as ve,s as Fs,d as oe,a as Bs,r as Yt}from"../chunks/CNLmrsxn.js";import{i as $e}from"../chunks/PBdh2ieK.js";import{B as Ws}from"../chunks/NB-qxM5S.js";import{d as Js,g as wt,w as Gt,a as Vs,o as qs}from"../chunks/DA_Jy5tn.js";function Ks(t,e){return e}function Xs(t,e,s){for(var r=[],n=e.length,i,a=e.length,o=0;o<n;o++){let w=e[o];Vt(w,()=>{if(i){if(i.pending.delete(w),i.done.add(w),i.pending.size===0){var S=t.outrogroups;St(Ct(i.done)),S.delete(i),S.size===0&&(t.outrogroups=null)}}else a-=1},!1)}if(a===0){var d=r.length===0&&s!==null;if(d){var v=s,u=v.parentNode;Is(u),u.append(v),t.items.clear()}St(e,!d)}else i={pending:new Set(e),done:new Set},(t.outrogroups??=new Set).add(i)}function St(t,e=!0){for(var s=0;s<t.length;s++)Es(t[s],e)}var Rt;function Me(t,e,s,r,n,i=null){var a=t,o=new Map,d=(e&Bt)!==0;if(d){var v=t;a=ae?je(Wt(v)):v.appendChild(it())}ae&&dt();var u=null,w=bs(()=>{var x=s();return _s(x)?x:x==null?[]:Ct(x)}),S,m=!0;function b(){c.fallback=u,Ys(c,S,a,e,r),u!==null&&(S.length===0?(u.f&xe)===0?Jt(u):(u.f^=xe,Ye(u,null,a)):Vt(u,()=>{u=null}))}var y=Ft(()=>{S=l(w);var x=S.length;let _=!1;if(ae){var T=gs(a)===hs;T!==(x===0)&&(a=zt(),je(a),Ge(!1),_=!0)}for(var P=new Set,R=He,C=ys(),D=0;D<x;D+=1){ae&&Te.nodeType===ms&&Te.data===ps&&(a=Te,_=!0,Ge(!1));var j=S[D],z=r(j,D),A=m?null:o.get(z);A?(A.v&&Pt(A.v,j),A.i&&Pt(A.i,D),C&&R.skipped_effects.delete(A.e)):(A=Gs(o,m?a:Rt??=it(),j,z,D,n,e,s),m||(A.e.f|=xe),o.set(z,A)),P.add(z)}if(x===0&&i&&!u&&(m?u=_t(()=>i(a)):(u=_t(()=>i(Rt??=it())),u.f|=xe)),ae&&x>0&&je(zt()),!m)if(C){for(const[k,U]of o)P.has(k)||R.skipped_effects.add(U.e);R.oncommit(b),R.ondiscard(()=>{})}else b();_&&Ge(!0),l(w)}),c={effect:y,items:o,outrogroups:null,fallback:u};m=!1,ae&&(a=Te)}function Xe(t){for(;t!==null&&(t.f&Cs)===0;)t=t.next;return t}function Ys(t,e,s,r,n){var i=(r&Ms)!==0,a=e.length,o=t.items,d=Xe(t.effect.first),v,u=null,w,S=[],m=[],b,y,c,x;if(i)for(x=0;x<a;x+=1)b=e[x],y=n(b,x),c=o.get(y).e,(c.f&xe)===0&&(c.nodes?.a?.measure(),(w??=new Set).add(c));for(x=0;x<a;x+=1){if(b=e[x],y=n(b,x),c=o.get(y).e,t.outrogroups!==null)for(const A of t.outrogroups)A.pending.delete(c),A.done.delete(c);if((c.f&xe)!==0)if(c.f^=xe,c===d)Ye(c,null,s);else{var _=u?u.next:d;c===t.effect.last&&(t.effect.last=c.prev),c.prev&&(c.prev.next=c.next),c.next&&(c.next.prev=c.prev),Ce(t,u,c),Ce(t,c,_),Ye(c,_,s),u=c,S=[],m=[],d=Xe(u.next);continue}if((c.f&gt)!==0&&(Jt(c),i&&(c.nodes?.a?.unfix(),(w??=new Set).delete(c))),c!==d){if(v!==void 0&&v.has(c)){if(S.length<m.length){var T=m[0],P;u=T.prev;var R=S[0],C=S[S.length-1];for(P=0;P<S.length;P+=1)Ye(S[P],T,s);for(P=0;P<m.length;P+=1)v.delete(m[P]);Ce(t,R.prev,C.next),Ce(t,u,R),Ce(t,C,T),d=T,u=C,x-=1,S=[],m=[]}else v.delete(c),Ye(c,d,s),Ce(t,c.prev,c.next),Ce(t,c,u===null?t.effect.first:u.next),Ce(t,u,c),u=c;continue}for(S=[],m=[];d!==null&&d!==c;)(v??=new Set).add(d),m.push(d),d=Xe(d.next);if(d===null)continue}(c.f&xe)===0&&S.push(c),u=c,d=Xe(c.next)}if(t.outrogroups!==null){for(const A of t.outrogroups)A.pending.size===0&&(St(Ct(A.done)),t.outrogroups?.delete(A));t.outrogroups.size===0&&(t.outrogroups=null)}if(d!==null||v!==void 0){var D=[];if(v!==void 0)for(c of v)(c.f&gt)===0&&D.push(c);for(;d!==null;)(d.f&gt)===0&&d!==t.fallback&&D.push(d),d=Xe(d.next);var j=D.length;if(j>0){var z=(r&Bt)!==0&&a===0?s:null;if(i){for(x=0;x<j;x+=1)D[x].nodes?.a?.measure();for(x=0;x<j;x+=1)D[x].nodes?.a?.fix()}Xs(t,D,z)}}i&&ks(()=>{if(w!==void 0)for(c of w)c.nodes?.a?.apply()})}function Gs(t,e,s,r,n,i,a,o){var d=(a&xs)!==0?(a&ws)===0?fe(s,!1,!1):At(s):null,v=(a&Ss)!==0?At(n):null;return{v:d,i:v,e:_t(()=>(i(e,d??s,v??n,o),()=>{t.delete(r)}))}}function Ye(t,e,s){if(t.nodes)for(var r=t.nodes.start,n=t.nodes.end,i=e&&(e.f&xe)===0?e.nodes.start:s;r!==null;){var a=Ns(r);if(i.before(r),r===n)return;r=a}}function Ce(t,e,s){e===null?t.effect.first=s:e.next=s,s===null?t.effect.last=e:s.prev=e}function re(t,e,s,r,n){ae&&dt();var i=e.$$slots?.[s],a=!1;i===!0&&(i=e.children,a=!0),i===void 0?n!==null&&n(t):i(t,a?()=>r:r)}function Qs(t,e,s,r,n,i){let a=ae;ae&&dt();var o=null;ae&&Te.nodeType===Ts&&(o=Te,dt());var d=ae?Te:t,v=new Ws(d,!1);Ft(()=>{const u=e()||null;var w=zs;if(u===null){v.ensure(null,null);return}return v.ensure(u,S=>{if(u){if(o=ae?o:document.createElementNS(w,u),us(o,o),r){ae&&fs(u)&&o.append(document.createComment(""));var m=ae?Wt(o):o.appendChild(it());ae&&(m===null?Ge(!1):je(m)),r(o,m)}Ps.nodes.end=o,S.before(o)}ae&&je(S)}),()=>{}},Ds),As(()=>{}),a&&(Ge(!0),je(d))}function Ze(t,e,s=e){var r=new WeakSet;Rs(t,"input",async n=>{var i=n?t.defaultValue:t.value;if(i=ht(t)?mt(i):i,s(i),He!==null&&r.add(He),await Us(),i!==(i=e())){var a=t.selectionStart,o=t.selectionEnd,d=t.value.length;if(t.value=i??"",o!==null){var v=t.value.length;a===o&&o===d&&v>d?(t.selectionStart=v,t.selectionEnd=v):(t.selectionStart=a,t.selectionEnd=Math.min(o,v))}}}),(ae&&t.defaultValue!==t.value||he(e)==null&&t.value)&&(s(ht(t)?mt(t.value):t.value),He!==null&&r.add(He)),Ls(()=>{var n=e();if(t===document.activeElement){var i=Os??He;if(r.has(i))return}ht(t)&&n===mt(t.value)||t.type==="date"&&!n&&!t.value||n!==t.value&&(t.value=n??"")})}function ht(t){var e=t.type;return e==="number"||e==="range"}function mt(t){return t===""?null:+t}const $s={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"};const Zs=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};const Ut=(...t)=>t.filter((e,s,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===s).join(" ").trim();var er=vs("<svg><!><!></svg>");function le(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]),r=ne(s,["name","color","size","strokeWidth","absoluteStrokeWidth","iconNode"]);Z(e,!1);let n=q(e,"name",8,void 0),i=q(e,"color",8,"currentColor"),a=q(e,"size",8,24),o=q(e,"strokeWidth",8,2),d=q(e,"absoluteStrokeWidth",8,!1),v=q(e,"iconNode",24,()=>[]);$e();var u=er();xt(u,(m,b,y)=>({...$s,...m,...r,width:a(),height:a(),stroke:i(),"stroke-width":b,class:y}),[()=>Zs(r)?void 0:{"aria-hidden":"true"},()=>(X(d()),X(o()),X(a()),he(()=>d()?Number(o())*24/Number(a()):o())),()=>(X(Ut),X(n()),X(s),he(()=>Ut("lucide-icon","lucide",n()?`lucide-${n()}`:"",s.class)))]);var w=h(u);Me(w,1,v,Ks,(m,b)=>{var y=Q(()=>qt(l(b),2));let c=()=>l(y)[0],x=()=>l(y)[1];var _=V(),T=L(_);Qs(T,c,!0,(P,R)=>{xt(P,()=>({...x()}))}),p(m,_)});var S=M(w);re(S,e,"default",{},null),f(u),p(t,u),ee()}function Qt(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M20 6 9 17l-5-5"}]];le(t,se({name:"check"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function $t(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["circle",{cx:"12",cy:"12",r:"10"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16"}]];le(t,se({name:"circle-alert"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function tr(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5"}],["path",{d:"M10 9H8"}],["path",{d:"M16 13H8"}],["path",{d:"M16 17H8"}]];le(t,se({name:"file-text"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function sr(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"m6 14 1.5-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.54 6a2 2 0 0 1-1.95 1.5H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H18a2 2 0 0 1 2 2v2"}]];le(t,se({name:"folder-open"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function rr(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z"}],["path",{d:"M12 22V12"}],["polyline",{points:"3.29 7 12 12 20.71 7"}],["path",{d:"m7.5 4.27 9 5.15"}]];le(t,se({name:"package"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function ar(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1"}]];le(t,se({name:"pause"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function nr(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z"}]];le(t,se({name:"pen"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function ir(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z"}]];le(t,se({name:"play"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function Zt(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M5 12h14"}],["path",{d:"M12 5v14"}]];le(t,se({name:"plus"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function or(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"}],["path",{d:"M3 3v5h5"}]];le(t,se({name:"rotate-ccw"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function lr(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2"}]];le(t,se({name:"square"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function Et(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M10 11v6"}],["path",{d:"M14 11v6"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"}],["path",{d:"M3 6h18"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}]];le(t,se({name:"trash-2"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function dr(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"}],["circle",{cx:"9",cy:"7",r:"4"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11"}]];le(t,se({name:"user-plus"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function Lt(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"}],["circle",{cx:"12",cy:"7",r:"4"}]];le(t,se({name:"user"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}function Be(t,e){const s=ne(e,["children","$$slots","$$events","$$legacy"]);const r=[["path",{d:"M18 6 6 18"}],["path",{d:"m6 6 12 12"}]];le(t,se({name:"x"},()=>s,{get iconNode(){return r},children:(n,i)=>{var a=V(),o=L(a);re(o,e,"default",{},null),p(n,a)},$$slots:{default:!0}}))}var cr=N('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"><div class="w-full max-w-2xl rounded-lg bg-white shadow-xl"><div class="flex items-center justify-between border-b border-gray-200 px-4 py-3"><h2 class="text-lg font-medium text-gray-900"> </h2> <button class="rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600"><!></button></div> <div class="p-4"><textarea placeholder="Enter a detailed description of this scenario..." class="h-64 w-full resize-none rounded-lg border border-gray-300 p-3 text-sm focus:border-blue-500 focus:outline-none focus:ring-1 focus:ring-blue-500"></textarea></div> <div class="flex justify-end gap-2 border-t border-gray-200 px-4 py-3"><button class="rounded px-4 py-2 text-sm text-gray-600 hover:bg-gray-100">Cancel</button> <button class="rounded bg-blue-500 px-4 py-2 text-sm text-white hover:bg-blue-600">Save</button></div></div></div>');function ur(t,e){Z(e,!0);let s=O("");Fe(()=>{g(s,e.description,!0)});function r(){e.onSave(l(s))}function n(){e.onClose()}function i(_){_.key==="Escape"&&e.onClose()}var a=cr();a.__click=n;var o=h(a);o.__click=_=>_.stopPropagation(),o.__keydown=i;var d=h(o),v=h(d),u=h(v);f(v);var w=M(v,2);w.__click=function(..._){e.onClose?.apply(this,_)};var S=h(w);Be(S,{size:20}),f(w),f(d);var m=M(d,2),b=h(m);Mt(b),f(m);var y=M(m,2),c=h(y);c.__click=function(..._){e.onClose?.apply(this,_)};var x=M(c,2);x.__click=r,f(y),f(o),f(a),W(()=>$(u,`${e.title??""} - Description`)),Ze(b,()=>l(s),_=>g(s,_)),p(t,a),ee()}ce(["click","keydown"]);var fr=N('<div class="flex items-center gap-2"><button class="flex items-center gap-1 rounded px-2 py-1 text-xs text-gray-600 hover:bg-gray-200 disabled:opacity-50" title="Reset to original"><!> Reset</button> <button class="flex items-center gap-1 rounded bg-blue-500 px-2 py-1 text-xs text-white hover:bg-blue-600 disabled:opacity-50" title="Save changes (Cmd/Ctrl+S)"><!> Save</button></div>'),vr=N('<div class="absolute bottom-0 left-0 right-0 flex items-center gap-2 bg-red-500/90 px-3 py-2 text-xs text-white"><!> </div>'),gr=N('<div class="relative flex-1"><textarea class="h-full w-full resize-none bg-gray-900 p-3 font-mono text-sm text-gray-100 focus:outline-none" spellcheck="false"></textarea> <!></div>'),hr=N('<div class="flex flex-1 items-center justify-center text-sm text-gray-400">Select a message to edit its JSON payload</div>'),mr=N('<div class="flex h-full flex-col border-t border-gray-200"><div class="flex items-center justify-between border-b border-gray-200 bg-gray-50 px-3 py-2"><span class="text-sm font-medium text-gray-700"><!></span> <!></div> <!></div>');function pr(t,e){Z(e,!0);let s=O(""),r=O(null),n=O(null);Fe(()=>{e.payload?(g(s,JSON.stringify(e.payload,null,2),!0),g(n,structuredClone(e.payload),!0),g(r,null)):(g(s,""),g(n,null),g(r,null))});function i(){try{const C=JSON.parse(l(s));return typeof C.className!="string"||typeof C.topic!="string"||typeof C.attributes!="object"||typeof C.message!="object"?(g(r,"Invalid structure: requires className, topic, attributes, and message"),null):(g(r,null),C)}catch(C){return g(r,C instanceof Error?C.message:"Invalid JSON",!0),null}}function a(){i()}function o(){const C=i();C&&e.onSave(C)}function d(){l(n)&&(g(s,JSON.stringify(l(n),null,2),!0),g(r,null))}function v(C){(C.metaKey||C.ctrlKey)&&C.key==="s"&&(C.preventDefault(),o())}const u=Q(()=>e.payload&&l(s)!==JSON.stringify(e.payload,null,2));var w=mr(),S=h(w),m=h(S),b=h(m);{var y=C=>{var D=bt();W(()=>$(D,`Editing: ${e.payload.className??""}`)),p(C,D)},c=C=>{var D=bt("JSON Editor");p(C,D)};F(b,C=>{e.payload?C(y):C(c,!1)})}f(m);var x=M(m,2);{var _=C=>{var D=fr(),j=h(D);j.__click=d;var z=h(j);or(z,{size:12}),we(),f(j);var A=M(j,2);A.__click=o;var k=h(A);Qt(k,{size:12}),we(),f(A),f(D),W(()=>{j.disabled=!l(u),A.disabled=!!l(r)||!l(u)}),p(C,D)};F(x,C=>{e.payload&&C(_)})}f(S);var T=M(S,2);{var P=C=>{var D=gr(),j=h(D);Mt(j),j.__input=a,j.__keydown=v;var z=M(j,2);{var A=k=>{var U=vr(),B=h(U);$t(B,{size:14});var I=M(B);f(U),W(()=>$(I,` ${l(r)??""}`)),p(k,U)};F(z,k=>{l(r)&&k(A)})}f(D),Ze(j,()=>l(s),k=>g(s,k)),p(C,D)},R=C=>{var D=hr();p(C,D)};F(T,C=>{e.payload?C(P):C(R,!1)})}f(w),p(t,w),ee()}ce(["click","input","keydown"]);const Ie="",yr=`${Ie}/publish`;async function br(t){try{const e=await fetch(yr,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});let s,r;if(e.ok)try{const n=await e.text();n&&(r=JSON.parse(n))}catch{}else try{s=await e.text()}catch{}return{ok:e.ok,status:e.status,statusText:e.statusText,errorBody:s,responseBody:r}}catch(e){return{ok:!1,status:0,statusText:e instanceof Error?e.message:"Network error"}}}async function _r(){const t=await fetch(`${Ie}/message-samples`);if(!t.ok)throw new Error(`Failed to fetch message samples: ${t.statusText}`);return t.json()}async function xr(t){const e=await fetch(`${Ie}/message-samples`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!e.ok)throw new Error(`Failed to save message sample: ${e.statusText}`);return e.json()}async function wr(t){const e=await fetch(`${Ie}/message-samples/${t}`,{method:"DELETE"});if(!e.ok)throw new Error(`Failed to delete message sample: ${e.statusText}`)}async function Sr(){const t=await fetch(`${Ie}/users`);if(!t.ok)throw new Error(`Failed to fetch users: ${t.statusText}`);return t.json()}async function kr(t){const e=await fetch(`${Ie}/users/${encodeURIComponent(t)}/scenarios`);if(!e.ok)throw new Error(`Failed to fetch scenarios: ${e.statusText}`);return e.json()}async function Cr(t,e){const s=await fetch(`${Ie}/users/${encodeURIComponent(t)}/scenarios`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!s.ok)throw new Error(`Failed to save scenario: ${s.statusText}`);return s.json()}async function Mr(t,e){const s=await fetch(`${Ie}/users/${encodeURIComponent(t)}/scenarios/${e}`,{method:"DELETE"});if(!s.ok)throw new Error(`Failed to delete scenario: ${s.statusText}`)}class Ir{#e=O(Qe([]));get samples(){return l(this.#e)}set samples(e){g(this.#e,e,!0)}#t=O(!0);get isLoading(){return l(this.#t)}set isLoading(e){g(this.#t,e,!0)}#s=O(null);get error(){return l(this.#s)}set error(e){g(this.#s,e,!0)}constructor(){typeof window<"u"&&this.init()}async init(){try{this.isLoading=!0,this.error=null,this.samples=await _r()}catch(e){this.error=e instanceof Error?e.message:"Failed to load message samples",console.error("Failed to load message samples:",e)}finally{this.isLoading=!1}}async upsertSample(e){const r=this.samples.findIndex(n=>n.messageId===e.messageId)===-1;r?this.samples=[...this.samples,e]:this.samples=this.samples.map(n=>n.messageId===e.messageId?e:n);try{const n=await xr(e);return this.samples=this.samples.map(i=>i.messageId===n.messageId?n:i),n}catch(n){throw r&&(this.samples=this.samples.filter(i=>i.messageId!==e.messageId)),n}}async reload(){await this.init()}async deleteSample(e){const s=this.samples.find(r=>r.messageId===e);this.samples=this.samples.filter(r=>r.messageId!==e);try{await wr(e)}catch(r){throw s&&(this.samples=[...this.samples,s]),r}}}const Ne=new Ir;var Er=N('<div draggable="true" class="flex cursor-grab items-center gap-2 rounded-lg border border-gray-200 bg-white p-3 shadow-sm transition-shadow hover:shadow-md active:cursor-grabbing" title="Double-click to edit"><div><!></div> <div class="min-w-0 flex-1"><div class="truncate text-sm font-medium text-gray-900"> </div> <div class="truncate text-xs text-gray-500"> </div></div></div>'),Nr=N('<div class="py-4 text-center text-sm text-gray-400">Loading templates...</div>'),Tr=N('<div class="py-4 text-center text-sm text-red-500"> </div>'),Dr=N('<div class="py-4 text-center text-sm text-gray-400">No message templates yet.<br/>Click "Add Message Type" to create one.</div>'),zr=N('<div class="flex h-full flex-col bg-gray-50 p-3"><h2 class="mb-3 text-sm font-semibold text-gray-700">Message Templates</h2> <button class="mb-3 flex items-center justify-center gap-2 rounded-lg border-2 border-dashed border-gray-300 bg-white px-3 py-2 text-sm text-gray-600 transition-colors hover:border-blue-400 hover:bg-blue-50 hover:text-blue-600"><!> Add Message Type</button> <div class="flex flex-col gap-2"></div> <!></div>');function Pr(t,e){Z(e,!0);const s=["bg-blue-500","bg-green-500","bg-amber-500","bg-purple-500","bg-rose-500","bg-cyan-500"];function r(m){const b=m.split("").reduce((y,c)=>y+c.charCodeAt(0),0);return s[b%s.length]}function n(m,b){m.dataTransfer&&(m.dataTransfer.effectAllowed="copy",m.dataTransfer.setData("application/json",JSON.stringify(b)),m.dataTransfer.setData("text/plain",b.className))}function i(m){e.onEditSample(m)}var a=zr(),o=M(h(a),2);o.__click=function(...m){e.onCreateSample?.apply(this,m)};var d=h(o);Zt(d,{size:16}),we(),f(o);var v=M(o,2);Me(v,21,()=>Ne.samples,m=>m.messageId,(m,b)=>{const y=Q(()=>r(l(b).className));var c=Er();c.__dblclick=()=>i(l(b));var x=h(c),_=h(x);rr(_,{size:16}),f(x);var T=M(x,2),P=h(T),R=h(P,!0);f(P);var C=M(P,2),D=h(C,!0);f(C),f(T),f(c),W(()=>{ve(x,1,`${l(y)??""} flex h-8 w-8 items-center justify-center rounded text-white`),$(R,l(b).className),$(D,l(b).topic)}),ge("dragstart",c,j=>n(j,l(b))),p(m,c)}),f(v);var u=M(v,2);{var w=m=>{var b=Nr();p(m,b)},S=m=>{var b=V(),y=L(b);{var c=_=>{var T=Tr(),P=h(T,!0);f(T),W(()=>$(P,Ne.error)),p(_,T)},x=_=>{var T=V(),P=L(T);{var R=C=>{var D=Dr();p(C,D)};F(P,C=>{Ne.samples.length===0&&C(R)},!0)}p(_,T)};F(y,_=>{Ne.error?_(c):_(x,!1)},!0)}p(m,b)};F(u,m=>{Ne.isLoading?m(w):m(S,!1)})}f(a),p(t,a),ee()}ce(["click","dblclick"]);var Ar=N('<p class="text-xs text-gray-500"> </p>'),Rr=N('<div class="absolute bottom-0 left-0 right-0 flex items-center gap-2 bg-red-500/90 px-3 py-2 text-xs text-white"><!> </div>'),Ur=N('<button class="flex items-center gap-1 rounded px-4 py-2 text-sm text-red-600 hover:bg-red-50"><!> Delete</button> <div class="flex-1"></div>',1),Lr=N('<div class="flex-1"></div>'),Or=N('<div class="fixed inset-0 z-50 flex items-center justify-center bg-black/50"><div class="flex max-h-[90vh] w-full max-w-2xl flex-col overflow-hidden rounded-lg bg-white shadow-xl"><div class="flex items-center justify-between border-b border-gray-200 px-4 py-3"><div><h2 class="text-lg font-medium text-gray-900"> </h2> <!></div> <button class="rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600"><!></button></div> <div class="relative flex-1 overflow-hidden"><textarea class="h-96 w-full resize-none bg-gray-900 p-4 font-mono text-sm text-gray-100 focus:outline-none" spellcheck="false"></textarea> <!></div> <div class="flex gap-2 border-t border-gray-200 px-4 py-3"><!> <button class="rounded px-4 py-2 text-sm text-gray-600 hover:bg-gray-100">Cancel</button> <button class="rounded bg-blue-500 px-4 py-2 text-sm text-white hover:bg-blue-600 disabled:opacity-50">Save</button></div></div></div>');function Hr(t,e){Z(e,!0);const s=`{
  "className": "ExampleMessage",
  "topic": "orders-topic",
  "attributes": {
    "traceId": "123-456-7890"
  },
  "message": {
    "name": "stuff"
  }
}`;let r=O(""),n=O(null);Fe(()=>{if(e.sample){const{className:I,topic:J,attributes:Y,message:te}=e.sample;g(r,JSON.stringify({className:I,topic:J,attributes:Y,message:te},null,2),!0)}else g(r,s);g(n,null)});function i(){try{const I=JSON.parse(l(r));return typeof I.className!="string"||typeof I.topic!="string"||typeof I.attributes!="object"||I.attributes===null||typeof I.message!="object"||I.message===null?(g(n,"Invalid structure: requires className, topic, attributes, and message"),null):(g(n,null),I)}catch(I){return g(n,I instanceof Error?I.message:"Invalid JSON",!0),null}}function a(){i()}function o(){const I=i();if(I){const J={...I,messageId:e.sample?.messageId??String(Date.now())};e.onSave(J)}}function d(){e.onClose()}function v(I){I.key==="Escape"&&e.onClose(),(I.metaKey||I.ctrlKey)&&I.key==="s"&&(I.preventDefault(),o())}var u=Or();u.__click=d;var w=h(u);w.__click=I=>I.stopPropagation(),w.__keydown=v;var S=h(w),m=h(S),b=h(m),y=h(b,!0);f(b);var c=M(b,2);{var x=I=>{var J=Ar(),Y=h(J);f(J),W(()=>$(Y,`ID: ${e.sample.messageId??""}`)),p(I,J)};F(c,I=>{e.sample&&I(x)})}f(m);var _=M(m,2);_.__click=function(...I){e.onClose?.apply(this,I)};var T=h(_);Be(T,{size:20}),f(_),f(S);var P=M(S,2),R=h(P);Mt(R),R.__input=a,R.__keydown=v;var C=M(R,2);{var D=I=>{var J=Rr(),Y=h(J);$t(Y,{size:14});var te=M(Y);f(J),W(()=>$(te,` ${l(n)??""}`)),p(I,J)};F(C,I=>{l(n)&&I(D)})}f(P);var j=M(P,2),z=h(j);{var A=I=>{var J=Ur(),Y=L(J);Y.__click=()=>e.onDelete(e.sample.messageId);var te=h(Y);Et(te,{size:14}),we(),f(Y),we(2),p(I,J)},k=I=>{var J=Lr();p(I,J)};F(z,I=>{e.sample&&e.onDelete?I(A):I(k,!1)})}var U=M(z,2);U.__click=function(...I){e.onClose?.apply(this,I)};var B=M(U,2);B.__click=o,f(j),f(w),f(u),W(()=>{$(y,e.sample?"Edit Message Sample":"Create Message Sample"),B.disabled=!!l(n)}),Ze(R,()=>l(r),I=>g(r,I)),p(t,u),ee()}ce(["click","keydown","input"]);var jr=N('<button class="flex h-8 w-8 items-center justify-center rounded bg-amber-500 text-white hover:bg-amber-600" title="Pause (Space)"><!></button>'),Fr=N('<button class="flex h-8 w-8 items-center justify-center rounded bg-green-500 text-white hover:bg-green-600 disabled:opacity-50" title="Play (Space)"><!></button>'),Br=N('<div class="flex items-center gap-3"><!> <button class="flex h-8 w-8 items-center justify-center rounded bg-gray-500 text-white hover:bg-gray-600 disabled:opacity-50" title="Stop"><!></button> <div class="flex items-center gap-2 text-sm"></div></div>');function Wr(t,e){Z(e,!0);var s=Br(),r=h(s);{var n=d=>{var v=jr();v.__click=function(...w){e.onPause?.apply(this,w)};var u=h(v);ar(u,{size:16}),f(v),p(d,v)},i=d=>{var v=Fr();v.__click=function(...w){e.onPlay?.apply(this,w)};var u=h(v);ir(u,{size:16}),f(v),W(()=>v.disabled=!e.hasMessages),p(d,v)};F(r,d=>{e.state.status==="playing"?d(n):d(i,!1)})}var a=M(r,2);a.__click=function(...d){e.onStop?.apply(this,d)};var o=h(a);lr(o,{size:16}),f(a),we(2),f(s),W(()=>a.disabled=e.state.status==="idle"),p(t,s),ee()}ce(["click"]);var Jr=N('<div class="flex-shrink-0"><div></div> <div class="h-[calc(100%-6px)]"><!></div></div>');function Vr(t,e){Z(e,!0);let s=q(e,"minHeight",3,128),r=q(e,"maxHeightRatio",3,.8),n=q(e,"initialHeightRatio",3,.5),i=O(0),a=O(!1),o=O(!1);Fe(()=>{!l(o)&&typeof window<"u"&&(g(i,window.innerHeight*n()),g(o,!0))});function d(y){y.preventDefault(),g(a,!0);const c=y.clientY,x=l(i);function _(P){const R=c-P.clientY,C=window.innerHeight*r();g(i,Math.min(C,Math.max(s(),x+R)),!0)}function T(){g(a,!1),window.removeEventListener("mousemove",_),window.removeEventListener("mouseup",T)}window.addEventListener("mousemove",_),window.addEventListener("mouseup",T)}function v(){return l(a)}var u={getIsResizing:v},w=Jr(),S=h(w);S.__mousedown=d;var m=M(S,2),b=h(m);return Fs(b,()=>e.children),f(m),f(w),W(()=>{oe(w,`height: ${l(i)??""}px;`),ve(S,1,`h-1.5 cursor-ns-resize border-t border-gray-200 bg-gray-100 hover:bg-blue-200 transition-colors
      ${l(a)?"bg-blue-300":""}`)}),p(t,w),ee(u)}ce(["mousedown"]);var qr=N('<div class="group flex items-center justify-between px-3 py-2 hover:bg-gray-100"><button> <span class="ml-1 text-xs text-gray-400"> </span></button> <button class="rounded p-1 text-gray-400 opacity-0 hover:bg-red-50 hover:text-red-500 group-hover:opacity-100" title="Delete scenario"><!></button></div>'),Kr=N('<div class="absolute right-0 top-full z-50 mt-1 w-64 rounded-lg border border-gray-200 bg-white py-1 shadow-lg"><button class="flex w-full items-center gap-2 px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-100"><!> New Scenario</button> <div class="my-1 border-t border-gray-100"></div> <!></div> <button class="fixed inset-0 z-40" aria-label="Close menu"></button>',1),Xr=N('<div class="relative"><button class="flex items-center gap-1 rounded px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100"><!> Scenarios</button> <!></div>');function Yr(t,e){Z(e,!0);let s=O(!1);function r(){g(s,!l(s))}function n(){e.onNew(),g(s,!1)}function i(m){e.onSelect(m),g(s,!1)}function a(){g(s,!1)}var o={close:a},d=Xr(),v=h(d);v.__click=r;var u=h(v);sr(u,{size:14}),we(),f(v);var w=M(v,2);{var S=m=>{var b=Kr(),y=L(b),c=h(y);c.__click=n;var x=h(c);Zt(x,{size:14}),we(),f(c);var _=M(c,4);Me(_,17,()=>e.scenarios,P=>P.id,(P,R)=>{var C=qr(),D=h(C);D.__click=()=>i(l(R).id);var j=h(D),z=M(j),A=h(z);f(z),f(D);var k=M(D,2);k.__click=()=>e.onDelete(l(R).id);var U=h(k);Et(U,{size:14}),f(k),f(C),W(()=>{ve(D,1,`flex-1 text-left text-sm
              ${l(R).id===e.currentScenarioId?"font-medium text-blue-600":"text-gray-700"}`),$(j,`${l(R).name??""} `),$(A,`(${l(R).messages.length??""})`)}),p(P,C)}),f(y);var T=M(y,2);T.__click=()=>g(s,!1),p(m,b)};F(w,m=>{l(s)&&m(S)})}return f(d),p(t,d),ee(o)}ce(["click"]);var Gr=N('<div class="max-h-32 overflow-auto rounded bg-gray-100 p-2 text-xs font-mono text-gray-700"> </div>'),Qr=N('<div class="absolute top-full left-0 z-[200] mt-2 w-72 rounded-lg border border-red-200 bg-white p-3 shadow-lg"><div class="mb-2 flex items-center justify-between"><span class="font-medium text-red-600"> </span> <button class="rounded p-0.5 text-gray-400 hover:bg-gray-100 hover:text-gray-600"><!></button></div> <div class="mb-2 text-sm text-gray-600"> </div> <!></div>');function $r(t,e){Z(e,!0);var s=Qr();s.__click=S=>S.stopPropagation();var r=h(s),n=h(r),i=h(n);f(n);var a=M(n,2);a.__click=function(...S){e.onClose?.apply(this,S)};var o=h(a);Be(o,{size:14}),f(a),f(r);var d=M(r,2),v=h(d,!0);f(d);var u=M(d,2);{var w=S=>{var m=Gr(),b=h(m,!0);f(m),W(()=>$(b,e.result.errorBody)),p(S,m)};F(u,S=>{e.result.errorBody&&S(w)})}f(s),W(()=>{$(i,`Error ${e.result.statusCode??""}`),$(v,e.result.statusText)}),p(t,s),ee()}ce(["click"]);var Zr=N('<div class="absolute top-full left-0 z-[200] mt-2 w-80 rounded-lg border border-green-200 bg-white p-3 shadow-lg"><div class="mb-2 flex items-center justify-between"><span class="font-medium text-green-600">Response</span> <button class="rounded p-0.5 text-gray-400 hover:bg-gray-100 hover:text-gray-600"><!></button></div> <div class="max-h-48 overflow-auto rounded bg-gray-100 p-2 text-xs font-mono text-black whitespace-pre"> </div></div>');function ea(t,e){Z(e,!0);const s=Q(()=>e.result.responseBody!==void 0?JSON.stringify(e.result.responseBody,null,2):"No response body");var r=Zr();r.__click=v=>v.stopPropagation();var n=h(r),i=M(h(n),2);i.__click=function(...v){e.onClose?.apply(this,v)};var a=h(i);Be(a,{size:14}),f(i),f(n);var o=M(n,2),d=h(o,!0);f(o),f(r),W(()=>$(d,l(s))),p(t,r),ee()}ce(["click"]);var ta=N("<button></button> <!>",1),sa=N('<div draggable="true" role="button" tabindex="0"><span class="truncate"> </span> <button class="ml-auto shrink-0 rounded p-0.5 hover:bg-white/20" title="Delete message"><!></button> <!></div>');function ra(t,e){Z(e,!0);const s=["bg-blue-500","bg-green-500","bg-amber-500","bg-purple-500","bg-rose-500","bg-cyan-500"];function r(z){const A=z.split("").reduce((k,U)=>k+U.charCodeAt(0),0);return s[A%s.length]}let n=O(!1),i=O(0),a=O(0),o=O(!1);function d(z){if(!z.dataTransfer)return;g(n,!0),g(i,z.clientX,!0),g(a,e.message.column,!0),z.dataTransfer.effectAllowed="move",z.dataTransfer.setData("text/plain",e.message.id);const A=document.createElement("div");A.style.opacity="0",document.body.appendChild(A),z.dataTransfer.setDragImage(A,0,0),setTimeout(()=>A.remove(),0)}function v(z){if(!l(n)||z.clientX===0)return;const A=z.clientX-l(i),k=Math.round(A/e.columnWidth),U=Math.min(30,Math.max(1,l(a)+k));e.onColumnChange(U)}function u(){g(n,!1)}function w(){e.onSelect()}function S(z){z.stopPropagation(),e.onDelete()}function m(z){z.stopPropagation(),e.result&&g(o,!l(o))}function b(){g(o,!1)}const y=Q(()=>r(e.message.payload.className)),c=Q(()=>(e.message.column-1)*e.columnWidth+4),x=Q(()=>e.columnWidth-8);var _=sa();ge("click",Kt,()=>{l(o)&&g(o,!1)}),_.__dblclick=w,_.__click=function(...z){e.onSelect?.apply(this,z)},_.__keydown=z=>z.key==="Enter"&&e.onSelect();var T=h(_),P=h(T,!0);f(T);var R=M(T,2);R.__click=S;var C=h(R);Be(C,{size:12}),f(R);var D=M(R,2);{var j=z=>{var A=ta(),k=L(A);k.__click=m;var U=M(k,2);{var B=I=>{var J=V(),Y=L(J);{var te=ue=>{$r(ue,{get result(){return e.result},onClose:b})},me=ue=>{ea(ue,{get result(){return e.result},onClose:b})};F(Y,ue=>{e.result.status==="error"?ue(te):ue(me,!1)})}p(I,J)};F(U,I=>{l(o)&&I(B)})}W(()=>{ve(k,1,`absolute -bottom-1 left-1/2 -translate-x-1/2 h-3 w-3 rounded-full border-2 border-white shadow-sm cursor-pointer
        ${e.result.status==="success"?"bg-green-500":"bg-red-500"}`),Bs(k,"title",e.result.status==="success"?"Click to view response":`Error: ${e.result.statusCode} ${e.result.statusText}`)}),p(z,A)};F(D,z=>{e.result&&z(j)})}f(_),W(()=>{ve(_,1,`absolute top-1 flex h-8 cursor-grab items-center gap-1 rounded px-2 text-xs text-white shadow transition-all select-none
    ${l(y)??""}
    ${e.isSelected?"ring-2 ring-white ring-offset-2":""}
    ${l(n)?"cursor-grabbing opacity-75":""}`),oe(_,`left: ${l(c)??""}px; width: ${l(x)??""}px;`),$(P,e.message.payload.className)}),ge("dragstart",_,d),ge("drag",_,v),ge("dragend",_,u),p(t,_),ee()}ce(["dblclick","click","keydown"]);var aa=N('<div class="pointer-events-none absolute top-0 z-20"><div class="absolute inset-y-0 left-0 w-0.5 bg-red-500"></div> <div class="absolute -top-1 left-0 h-3 w-3 -translate-x-1/2 rotate-45 bg-red-500"></div></div>');function na(t,e){const s=Q(()=>e.labelWidth+(e.currentColumn-1)*e.columnWidth);var r=V(),n=L(r);{var i=a=>{var o=aa();W(()=>oe(o,`left: ${l(s)??""}px; width: ${e.columnWidth??""}px; height: ${e.height??""}px;`)),p(a,o)};F(n,a=>{e.currentColumn>0&&a(i)})}p(t,r)}var ia=N('<div class="flex shrink-0 items-center justify-center border-r border-gray-200 text-xs font-medium text-gray-500"> </div>'),oa=N('<div class="flex h-32 items-center justify-center text-sm text-gray-400">Drag messages here to build your scenario</div>'),la=N('<div><div class="sticky left-0 z-5 flex h-full shrink-0 items-center bg-white/90 px-2 text-xs font-medium text-gray-600 border-r border-gray-200"><span class="truncate"> </span></div> <div class="lane-content relative"></div></div>'),da=N('<div class="flex h-full flex-col"><div class="flex items-center justify-between border-b border-gray-200 bg-gray-50 px-3 py-2"><span class="text-sm font-medium text-gray-700">Timeline</span></div> <div role="application" tabindex="0"><div class="relative"><div class="sticky top-0 z-10 flex h-6 border-b border-gray-200 bg-gray-100"><div class="shrink-0 border-r border-gray-200"></div> <!></div> <div class="relative"><!> <!></div></div></div></div>');function ca(t,e){Z(e,!0);const s=120,r=120,n=30;let i=O(void 0),a=O(!1);const o=Q(()=>{const k={};for(const U of e.messages){const B=U.payload.className;k[B]||(k[B]=[]),k[B].push(U)}return Object.entries(k).sort((U,B)=>U[0].localeCompare(B[0]))}),d=Q(()=>Array.from({length:n},(k,U)=>U+1)),v=Q(()=>n*s);function u(k){k.preventDefault(),k.dataTransfer&&(k.dataTransfer.dropEffect="copy"),g(a,!0)}function w(){g(a,!1)}function S(k){if(k.preventDefault(),g(a,!1),!k.dataTransfer||!l(i))return;const U=k.dataTransfer.getData("application/json");if(U)try{const B=JSON.parse(U),I=l(i).getBoundingClientRect(),J=l(i).scrollLeft,te=k.clientX-I.left+J-r,me=Math.min(n,Math.max(1,Math.ceil(te/s)));e.onAddMessage(B,me)}catch{console.error("Failed to parse dropped data")}}function m(k){(k.target===l(i)||k.target.classList.contains("lane")||k.target.classList.contains("lane-content"))&&e.onSelectMessage(null)}function b(k){const U=e.messages.find(B=>B.id===k);return U?U.column<=e.completedColumns:!1}var y=da(),c=M(h(y),2);c.__click=m;var x=h(c);oe(x,`width: ${r+l(v)}px; min-height: 100%;`);var _=h(x),T=h(_);oe(T,"width: 120px;");var P=M(T,2);Me(P,16,()=>l(d),k=>k,(k,U)=>{var B=ia();oe(B,"width: 120px;");var I=h(B,!0);f(B),W(()=>$(I,U)),p(k,B)}),f(_);var R=M(_,2),C=h(R);{var D=k=>{var U=oa();oe(U,`width: ${r+l(v)}px;`),p(k,U)},j=k=>{var U=V(),B=L(U);Me(B,19,()=>l(o),([I,J])=>I,(I,J,Y)=>{var te=Q(()=>qt(l(J),2));let me=()=>l(te)[0],ue=()=>l(te)[1];var Se=la();let Pe;var Ee=h(Se);oe(Ee,"width: 120px;");var tt=h(Ee),ut=h(tt,!0);f(tt),f(Ee);var Ae=M(Ee,2);oe(Ae,`width: ${l(v)??""}px;`),Me(Ae,21,ue,We=>We.id,(We,be)=>{{let st=Q(()=>e.selectedMessageId===l(be).id),Je=Q(()=>b(l(be).id));ra(We,{get message(){return l(be)},columnWidth:s,get isSelected(){return l(st)},get isSent(){return l(Je)},get result(){return e.messageResults[l(be).id]},onSelect:()=>e.onSelectMessage(l(be).id),onDelete:()=>e.onDeleteMessage(l(be).id),onColumnChange:ft=>e.onUpdateColumn(l(be).id,ft)})}}),f(Ae),f(Se),W(()=>{Pe=ve(Se,1,"lane relative flex h-10 border-b border-gray-100",null,Pe,{"bg-gray-50":l(Y)%2===1}),$(ut,me())}),p(I,Se)}),p(k,U)};F(C,k=>{l(o).length===0?k(D):k(j,!1)})}var z=M(C,2);{var A=k=>{{let U=Q(()=>l(o).length*40+24);na(k,{get currentColumn(){return e.currentColumn},columnWidth:s,labelWidth:r,get height(){return l(U)}})}};F(z,k=>{(e.isPlaying||e.currentColumn>0)&&k(A)})}f(R),f(x),f(c),Xt(c,k=>g(i,k),()=>l(i)),f(y),W(()=>ve(c,1,`relative flex-1 overflow-auto bg-white
			${l(a)?"bg-blue-50":""}`)),ge("dragover",c,u),ge("dragleave",c,w),ge("drop",c,S),p(t,y),ee()}ce(["click"]);var ua=N("<button><!> </button>"),fa=N('<div class="my-1 border-t border-gray-100"></div> <!>',1),va=N('<div class="absolute left-0 top-full z-50 mt-1 w-64 rounded-lg border border-gray-200 bg-white py-1 shadow-lg"><div class="px-3 py-2"><div class="flex gap-2"><input type="text" placeholder="New user ID..." class="flex-1 rounded border border-gray-300 px-2 py-1.5 text-sm focus:border-blue-500 focus:outline-none"/> <button class="flex items-center gap-1 rounded bg-blue-500 px-2 py-1.5 text-sm text-white hover:bg-blue-600 disabled:opacity-50"><!></button></div></div> <!></div> <button class="fixed inset-0 z-40" aria-label="Close menu"></button>',1),ga=N('<div class="relative"><button class="flex items-center gap-1.5 rounded px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100"><!> </button> <!></div>');function ha(t,e){Z(e,!0);let s=O(!1),r=O("");function n(){g(s,!l(s))}function i(c){e.onSelect(c),g(s,!1)}function a(){const c=l(r).trim();c&&!e.users.includes(c)&&(e.onAdd(c),g(r,""),g(s,!1))}function o(c){c.key==="Enter"&&a()}function d(){g(s,!1)}var v={close:d},u=ga(),w=h(u);w.__click=n;var S=h(w);Lt(S,{size:14});var m=M(S);f(w);var b=M(w,2);{var y=c=>{var x=va(),_=L(x),T=h(_),P=h(T),R=h(P);Yt(R),R.__keydown=o;var C=M(R,2);C.__click=a;var D=h(C);dr(D,{size:14}),f(C),f(P),f(T);var j=M(T,2);{var z=k=>{var U=fa(),B=M(L(U),2);Me(B,16,()=>e.users,I=>I,(I,J)=>{var Y=ua();Y.__click=()=>i(J);var te=h(Y);Lt(te,{size:14});var me=M(te);f(Y),W(()=>{ve(Y,1,`flex w-full items-center gap-2 px-3 py-2 text-left text-sm hover:bg-gray-100
              ${J===e.currentUserId?"font-medium text-blue-600":"text-gray-700"}`),$(me,` ${J??""}`)}),p(I,Y)}),p(k,U)};F(j,k=>{e.users.length>0&&k(z)})}f(_);var A=M(_,2);A.__click=()=>g(s,!1),W(k=>C.disabled=k,[()=>!l(r).trim()||e.users.includes(l(r).trim())]),Ze(R,()=>l(r),k=>g(r,k)),p(c,x)};F(b,c=>{l(s)&&c(y)})}return f(u),W(()=>$(m,` ${e.currentUserId??"Select User"??""}`)),p(t,u),ee(v)}ce(["click","keydown"]);class ma{#e=O("idle");get status(){return l(this.#e)}set status(e){g(this.#e,e,!0)}#t=O(0);get currentColumn(){return l(this.#t)}set currentColumn(e){g(this.#t,e,!0)}#s=O(0);get completedColumns(){return l(this.#s)}set completedColumns(e){g(this.#s,e,!0)}#r=O(Qe([]));get errors(){return l(this.#r)}set errors(e){g(this.#r,e,!0)}#a=O(Qe({}));get messageResults(){return l(this.#a)}set messageResults(e){g(this.#a,e,!0)}abortController=null;get state(){return{status:this.status,currentColumn:this.currentColumn,completedColumns:this.completedColumns,errors:this.errors,messageResults:this.messageResults}}async play(e){if(this.status!=="playing"){if(this.status==="paused"){this.resume(e);return}this.status="playing",this.currentColumn=0,this.completedColumns=0,this.errors=[],this.messageResults={},this.abortController=new AbortController,await this.executeColumns(e,1)}}async resume(e){this.status="playing",this.abortController=new AbortController,await this.executeColumns(e,this.completedColumns+1)}pause(){this.status==="playing"&&(this.status="paused",this.abortController?.abort())}stop(){this.status="idle",this.currentColumn=0,this.completedColumns=0,this.errors=[],this.messageResults={},this.abortController?.abort()}async executeColumns(e,s){for(let r=s;r<=30;r++){if(this.abortController?.signal.aborted)return;const n=e.filter(o=>o.column===r);if(n.length===0)continue;this.currentColumn=r;const i=await Promise.all(n.map(async o=>{const d=await br(o.payload);return{message:o,response:d}}));if(this.abortController?.signal.aborted)return;let a=!1;for(const{message:o,response:d}of i)d.ok?this.messageResults={...this.messageResults,[o.id]:{status:"success",responseBody:d.responseBody}}:(this.messageResults={...this.messageResults,[o.id]:{status:"error",statusCode:d.status,statusText:d.statusText,errorBody:d.errorBody}},a=!0);if(a){this.status="error";const o=i.find(d=>!d.response.ok);o&&(console.log({failedMsg:o}),this.errors=i.filter(d=>!d.response.ok).map(d=>`Failed to send ${d.message.payload.className}`));return}this.completedColumns=r}this.status==="playing"&&(this.status="idle")}}const ie=new ma;function Ot(){return crypto.randomUUID()}class pa{#e=O(Qe([]));get scenarios(){return l(this.#e)}set scenarios(e){g(this.#e,e,!0)}#t=O(null);get currentScenarioId(){return l(this.#t)}set currentScenarioId(e){g(this.#t,e,!0)}#s=O(null);get selectedMessageId(){return l(this.#s)}set selectedMessageId(e){g(this.#s,e,!0)}#r=O(!1);get isLoading(){return l(this.#r)}set isLoading(e){g(this.#r,e,!0)}#a=O(null);get error(){return l(this.#a)}set error(e){g(this.#a,e,!0)}#n=O(null);get userId(){return l(this.#n)}set userId(e){g(this.#n,e,!0)}#i=Q(()=>this.scenarios.find(e=>e.id===this.currentScenarioId)??null);get currentScenario(){return l(this.#i)}set currentScenario(e){g(this.#i,e)}#o=Q(()=>this.currentScenario?.messages.find(e=>e.id===this.selectedMessageId)??null);get selectedMessage(){return l(this.#o)}set selectedMessage(e){g(this.#o,e)}async loadForUser(e){this.userId=e,this.isLoading=!0,this.error=null;try{const s=await kr(e);this.scenarios=s.map(r=>({...r,description:r.description??""})),this.currentScenarioId=this.scenarios[0]?.id??null,this.selectedMessageId=null}catch(s){this.error=s instanceof Error?s.message:"Failed to load scenarios",console.error("Failed to load scenarios:",s)}finally{this.isLoading=!1}}clearForNoUser(){this.userId=null,this.scenarios=[],this.currentScenarioId=null,this.selectedMessageId=null,this.isLoading=!1,this.error=null}async persistScenario(e){if(!this.userId)throw new Error("No user selected");try{await Cr(this.userId,e)}catch(s){throw console.error("Failed to save scenario:",s),s}}async createScenario(e){if(!this.userId)throw new Error("No user selected");const s={id:Ot(),name:e,description:"",messages:[]};return this.scenarios=[...this.scenarios,s],this.currentScenarioId=s.id,this.selectedMessageId=null,await this.persistScenario(s),s.id}async deleteScenario(e){this.userId&&(this.scenarios=this.scenarios.filter(s=>s.id!==e),this.currentScenarioId===e&&(this.currentScenarioId=this.scenarios[0]?.id??null,this.selectedMessageId=null),await Mr(this.userId,e))}async renameScenario(e,s){const r=this.scenarios.find(i=>i.id===e);if(!r)return;const n={...r,name:s};this.scenarios=this.scenarios.map(i=>i.id===e?n:i),await this.persistScenario(n)}async updateDescription(e,s){const r=this.scenarios.find(i=>i.id===e);if(!r)return;const n={...r,description:s};this.scenarios=this.scenarios.map(i=>i.id===e?n:i),await this.persistScenario(n)}selectScenario(e){this.currentScenarioId=e,this.selectedMessageId=null}async addMessage(e,s=1){if(!this.currentScenarioId)return"";const r={id:Ot(),column:Math.min(30,Math.max(1,s)),payload:structuredClone(e)},n=this.scenarios.find(a=>a.id===this.currentScenarioId);if(!n)return"";const i={...n,messages:[...n.messages,r]};return this.scenarios=this.scenarios.map(a=>a.id===this.currentScenarioId?i:a),this.selectedMessageId=r.id,await this.persistScenario(i),r.id}async removeMessage(e){if(!this.currentScenarioId)return;const s=this.scenarios.find(n=>n.id===this.currentScenarioId);if(!s)return;const r={...s,messages:s.messages.filter(n=>n.id!==e)};this.scenarios=this.scenarios.map(n=>n.id===this.currentScenarioId?r:n),this.selectedMessageId===e&&(this.selectedMessageId=null),await this.persistScenario(r)}async updateMessage(e,s){if(!this.currentScenarioId)return;const r=this.scenarios.find(i=>i.id===this.currentScenarioId);if(!r)return;const n={...r,messages:r.messages.map(i=>i.id===e?{...i,payload:structuredClone(s)}:i)};this.scenarios=this.scenarios.map(i=>i.id===this.currentScenarioId?n:i),await this.persistScenario(n)}async updateColumn(e,s){if(!this.currentScenarioId)return;const r=this.scenarios.find(i=>i.id===this.currentScenarioId);if(!r)return;const n={...r,messages:r.messages.map(i=>i.id===e?{...i,column:Math.min(30,Math.max(1,s))}:i)};this.scenarios=this.scenarios.map(i=>i.id===this.currentScenarioId?n:i),await this.persistScenario(n)}selectMessage(e){this.selectedMessageId=e}async clearScenario(){if(!this.currentScenarioId)return;const e=this.scenarios.find(r=>r.id===this.currentScenarioId);if(!e)return;const s={...e,messages:[]};this.scenarios=this.scenarios.map(r=>r.id===this.currentScenarioId?s:r),this.selectedMessageId=null,await this.persistScenario(s)}}const H=new pa,pt="reggie-selected-user";class ya{#e=O(Qe([]));get users(){return l(this.#e)}set users(e){g(this.#e,e,!0)}#t=O(null);get currentUserId(){return l(this.#t)}set currentUserId(e){g(this.#t,e,!0)}#s=O(!0);get isLoading(){return l(this.#s)}set isLoading(e){g(this.#s,e,!0)}#r=O(null);get error(){return l(this.#r)}set error(e){g(this.#r,e,!0)}constructor(){typeof window<"u"&&this.init()}async init(){try{this.isLoading=!0,this.error=null,this.users=await Sr();const e=localStorage.getItem(pt);e&&this.users.includes(e)&&(this.currentUserId=e)}catch(e){this.error=e instanceof Error?e.message:"Failed to load users",console.error("Failed to load users:",e)}finally{this.isLoading=!1}}selectUser(e){this.currentUserId=e,e?localStorage.setItem(pt,e):localStorage.removeItem(pt)}addUser(e){this.users.includes(e)||(this.users=[...this.users,e]),this.selectUser(e)}}const _e=new ya;function ba(t,e,s,r){var n,i,a=!1,o=s.length>=2,d=(b,y,c)=>{if(n=y,o&&(i=b),!a){let x=e(b,y,c);if(e.length<2)y(x);else return x}a=!1},v=Js(t,d,r),u=!Array.isArray(t);function w(b){var y=s(b,i);u?(a=!0,t.set(y)):y.forEach((c,x)=>{a=!0,t[x].set(c)}),a=!1}var S=!1;function m(b){var y,c,x,_;if(S){_=b(wt(v)),n(_);return}var T=v.subscribe(P=>{S?y?c=!0:y=!0:x=P});_=b(x),S=!0,n(_),T(),S=!1,c&&(_=wt(v)),y&&w(_)}return{subscribe:v.subscribe,set(b){m(()=>b)},update:m}}const _a=20,ze=Gt([]),Nt=Gt(null),ot=new Map,Ht=t=>{if(ot.has(t))return;const e=setTimeout(()=>{ot.delete(t),ts(t)},1e3);ot.set(t,e)},xa=t=>{const e=ot.get(t);e&&clearTimeout(e)};function es(t){t.id&&xa(t.id),ze.update(e=>e.map(s=>s.id===t.id?{...s,...t}:s))}function wa(t){ze.update(e=>[t,...e].slice(0,_a))}function Sa(t){wt(ze).find(e=>e.id===t.id)?es(t):wa(t)}function ka(t){ze.update(e=>(t?Ht(t):e.forEach(s=>{Ht(s.id)}),e.map(s=>s.id===t||t===void 0?{...s,visible:!1}:s)))}function ts(t){ze.update(e=>t===void 0?[]:e.filter(s=>s.id!==t))}function Ca(t){Nt.set(t)}function Ma(t){let e;Nt.update(s=>(e=t-(s||0),null)),ze.update(s=>s.map(r=>({...r,pauseDuration:r.pauseDuration+e})))}const Ia={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3};function Ea(t={}){return{toasts:ba(ze,s=>s.map(r=>({...t,...t[r.type],...r,duration:r.duration||t[r.type]?.duration||t?.duration||Ia[r.type],style:[t.style,t[r.type]?.style,r.style].join(";")})),s=>s),pausedAt:Nt}}const Na=t=>typeof t=="function",jt=(t,e)=>Na(t)?t(e):t,Ta=(()=>{let t=0;return()=>(t+=1,t.toString())})(),kt=(()=>{let t;return()=>{if(t===void 0&&typeof window<"u"){const e=matchMedia("(prefers-reduced-motion: reduce)");t=!e||e.matches}return t}})(),Da=(t,e="blank",s)=>({createdAt:Date.now(),visible:!0,type:e,ariaProps:{role:"status","aria-live":"polite"},message:t,pauseDuration:0,...s,id:s?.id||Ta()}),et=t=>(e,s)=>{const r=Da(e,t,s);return Sa(r),r.id},G=(t,e)=>et("blank")(t,e);G.error=et("error");G.success=et("success");G.loading=et("loading");G.custom=et("custom");G.dismiss=t=>{ka(t)};G.remove=t=>ts(t);G.promise=(t,e,s)=>{const r=G.loading(e.loading,{...s,...s?.loading});return t.then(n=>(G.success(jt(e.success,n),{id:r,...s,...s?.success}),n)).catch(n=>{G.error(jt(e.error,n),{id:r,...s,...s?.error})}),t};function za(t,e,s){const{reverseOrder:r,gutter:n=8,defaultPosition:i}=s||{},a=e.filter(u=>(u.position||i)===(t.position||i)&&u.height),o=a.findIndex(u=>u.id===t.id),d=a.filter((u,w)=>w<o&&u.visible).length;return a.filter(u=>u.visible).slice(...r?[d+1]:[0,d]).reduce((u,w)=>u+(w.height||0)+n,0)}const Pa={startPause(){Ca(Date.now())},endPause(){Ma(Date.now())},updateHeight:(t,e)=>{es({id:t,height:e})},calculateOffset:za};function Aa(t){const{toasts:e,pausedAt:s}=Ea(t),r=new Map;let n;const i=[s.subscribe(a=>{if(a){for(const[,o]of r)clearTimeout(o);r.clear()}n=a}),e.subscribe(a=>{if(n)return;const o=Date.now();for(const d of a){if(r.has(d.id)||d.duration===1/0)continue;const v=(d.duration||0)+d.pauseDuration-(o-d.createdAt);if(v<0)return d.visible&&G.dismiss(d.id),null;r.set(d.id,setTimeout(()=>G.dismiss(d.id),v))}})];return Vs(()=>{for(const a of i)a()}),{toasts:e,handlers:Pa}}var Ra=N('<div class="svelte-1rwl7ho"></div>');function Ua(t,e){let s=q(e,"primary",8,"#61d345"),r=q(e,"secondary",8,"#fff");var n=Ra();let i;W(()=>i=oe(n,"",i,{"--primary":s(),"--secondary":r()})),p(t,n)}var La=N('<div class="svelte-tdvg6p"></div>');function Oa(t,e){let s=q(e,"primary",8,"#ff4b4b"),r=q(e,"secondary",8,"#fff");var n=La();let i;W(()=>i=oe(n,"",i,{"--primary":s(),"--secondary":r()})),p(t,n)}var Ha=N('<div class="svelte-1xo581e"></div>');function ja(t,e){let s=q(e,"primary",8,"#616161"),r=q(e,"secondary",8,"#e0e0e0");var n=Ha();let i;W(()=>i=oe(n,"",i,{"--primary":s(),"--secondary":r()})),p(t,n)}var Fa=N('<div class="animated svelte-qnoxya"> </div>'),Ba=N('<div class="status svelte-qnoxya"><!></div>'),Wa=N('<div class="indicator svelte-qnoxya"><!> <!></div>');function yt(t,e){Z(e,!1);const s=fe(),r=fe(),n=fe();let i=q(e,"toast",8);De(()=>(l(s),l(r),l(n),X(i())),()=>{(u=>{g(s,u.type),g(r,u.icon),g(n,u.iconTheme)})(i())}),ct();var a=V(),o=L(a);{var d=u=>{var w=Fa(),S=h(w,!0);f(w),W(()=>$(S,l(r))),p(u,w)},v=u=>{var w=V(),S=L(w);{var m=y=>{var c=V(),x=L(c);It(x,()=>l(r),(_,T)=>{T(_,{})}),p(y,c)},b=y=>{var c=V(),x=L(c);{var _=T=>{var P=Wa(),R=h(P);ja(R,se(()=>l(n)));var C=M(R,2);{var D=j=>{var z=Ba(),A=h(z);{var k=B=>{Oa(B,se(()=>l(n)))},U=B=>{Ua(B,se(()=>l(n)))};F(A,B=>{l(s)==="error"?B(k):B(U,!1)})}f(z),p(j,z)};F(C,j=>{l(s)!=="loading"&&j(D)})}f(P),p(T,P)};F(x,T=>{l(s)!=="blank"&&T(_)},!0)}p(y,c)};F(S,y=>{typeof l(r)<"u"?y(m):y(b,!1)},!0)}p(u,w)};F(o,u=>{typeof l(r)=="string"?u(d):u(v,!1)})}p(t,a),ee()}var Ja=N("<div><!></div>");function lt(t,e){Z(e,!1);let s=q(e,"toast",8);$e();var r=Ja();xt(r,()=>({class:"message",...s().ariaProps}),void 0,void 0,void 0,"svelte-tb6am6");var n=h(r);{var i=o=>{var d=bt();W(()=>$(d,(X(s()),he(()=>s().message)))),p(o,d)},a=o=>{var d=V(),v=L(d);It(v,()=>s().message,(u,w)=>{w(u,{get toast(){return s()}})}),p(o,d)};F(n,o=>{X(s()),he(()=>typeof s().message=="string")?o(i):o(a,!1)})}f(r),p(t,r),ee()}var Va=N("<!> <!>",1),qa=N("<div><!></div>");function Ka(t,e){Z(e,!1);let s=q(e,"toast",8),r=q(e,"position",24,()=>{}),n=q(e,"style",8,""),i=q(e,"Component",24,()=>{}),a=fe(),o=fe();De(()=>(X(s()),X(r()),kt),()=>{const m=(s().position||r()||"top-center").includes("top");g(a,m?1:-1);const[b,y]=kt()?["fadeIn","fadeOut"]:["enter","exit"];g(o,s().visible?b:y)}),ct(),$e();var d=qa();let v;var u=h(d);{var w=m=>{var b=V(),y=L(b);It(y,i,(c,x)=>{x(c,{$$slots:{icon:(_,T)=>{yt(_,{get toast(){return s()},slot:"icon"})},message:(_,T)=>{lt(_,{get toast(){return s()},slot:"message"})}}})}),p(m,b)},S=m=>{var b=V(),y=L(b);re(y,e,"default",{get ToastIcon(){return yt},get ToastMessage(){return lt},get toast(){return s()}},c=>{var x=Va(),_=L(x);yt(_,{get toast(){return s()}});var T=M(_,2);lt(T,{get toast(){return s()}}),p(c,x)}),p(m,b)};F(u,m=>{i()?m(w):m(S,!1)})}f(d),W(()=>{ve(d,1,`base ${X(s()),l(o),he(()=>s().height?l(o):"transparent")??""} ${X(s()),he(()=>s().className||"")??""}`,"svelte-1g0yga0"),v=oe(d,`${n()??""}; ${X(s()),he(()=>s().style)??""}`,v,{"--factor":l(a)})}),p(t,d),ee()}var Xa=N("<div><!></div>");function Ya(t,e){Z(e,!1);const s=fe(),r=fe(),n=fe(),i=fe();let a=q(e,"toast",8),o=q(e,"setHeight",8),d=fe();qs(()=>{o()(l(d).getBoundingClientRect().height)}),De(()=>X(a()),()=>{g(s,a().position?.includes("top")?0:null)}),De(()=>X(a()),()=>{g(r,a().position?.includes("bottom")?0:null)}),De(()=>X(a()),()=>{g(n,a().position?.includes("top")?1:-1)}),De(()=>X(a()),()=>{g(i,a().position?.includes("center")&&"center"||(a().position?.includes("right")||a().position?.includes("end"))&&"flex-end"||null)}),ct(),$e();var v=Xa();let u,w;var S=h(v);{var m=y=>{lt(y,{get toast(){return a()}})},b=y=>{var c=V(),x=L(c);re(x,e,"default",{get toast(){return a()}},_=>{Ka(_,{get toast(){return a()},get position(){return X(a()),he(()=>a().position)}})}),p(y,c)};F(S,y=>{X(a()),he(()=>a().type==="custom")?y(m):y(b,!1)})}f(v),Xt(v,y=>g(d,y),()=>l(d)),W(y=>{u=ve(v,1,"wrapper svelte-fsxqeu",null,u,y),w=oe(v,"",w,{"--factor":l(n),"--offset":(X(a()),he(()=>a().offset)),top:l(s),bottom:l(r),"justify-content":l(i)})},[()=>({active:a().visible,transition:!kt()})]),p(t,v),ee()}var Ga=N('<div role="alert"></div>');function Qa(t,e){Z(e,!1);const s=()=>js(w,"$toasts",r),[r,n]=Hs();let i=q(e,"reverseOrder",8,!1),a=q(e,"position",8,"top-center"),o=q(e,"toastOptions",24,()=>{}),d=q(e,"gutter",8,8),v=q(e,"containerStyle",24,()=>{}),u=q(e,"containerClassName",24,()=>{});const{toasts:w,handlers:S}=Aa(o());let m=fe();De(()=>(s(),X(a()),X(i()),X(d())),()=>{g(m,s().map(y=>({...y,position:y.position||a(),offset:S.calculateOffset(y,s(),{reverseOrder:i(),gutter:d(),defaultPosition:a()})})))}),ct(),$e();var b=Ga();Me(b,5,()=>l(m),y=>y.id,(y,c)=>{Ya(y,{get toast(){return l(c)},setHeight:x=>S.updateHeight(l(c).id,x)})}),f(b),W(()=>{ve(b,1,`toaster ${(u()||"")??""}`,"svelte-yoigw"),oe(b,v())}),ge("mouseenter",b,function(...y){S.startPause?.apply(this,y)}),ge("mouseleave",b,function(...y){S.endPause?.apply(this,y)}),p(t,b),ee(),n()}var $a=N('<input type="text" class="w-40 rounded border border-gray-300 px-2 py-1 text-sm"/> <button class="rounded p-1 text-green-600 hover:bg-green-50"><!></button> <button class="rounded p-1 text-gray-400 hover:bg-gray-100"><!></button>',1),Za=N('<span class="font-medium text-gray-700"> </span> <button class="rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600" title="Rename scenario"><!></button> <button title="Edit description"><!></button>',1),en=N('<span class="text-sm text-gray-500">No scenarios</span>'),tn=N('<div class="h-6 w-px bg-gray-200"></div> <!> <div class="flex items-center gap-2"><!></div>',1),sn=N('<button class="flex items-center gap-1 rounded px-3 py-1.5 text-sm text-gray-600 hover:bg-gray-100 disabled:opacity-50" title="Clear all messages"><!> Clear</button> <!>',1),rn=N('<div class="flex flex-1 items-center justify-center text-gray-500">Select a user to view scenarios</div>'),an=N('<div class="flex-1 overflow-hidden"><!></div> <!>',1),nn=N('<!> <div class="flex h-screen flex-col bg-gray-100"><header class="flex items-center justify-between border-b border-gray-200 bg-white px-4 py-2"><div class="flex items-center gap-4"><!> <!></div> <div class="flex items-center gap-2"><!></div></header> <div class="flex flex-1 overflow-hidden"><aside class="w-56 flex-shrink-0 overflow-y-auto border-r border-gray-200 bg-white"><!></aside> <main class="flex flex-1 flex-col overflow-hidden"><!></main></div></div> <!> <!>',1);function hn(t,e){Z(e,!0);let s=O(!1),r=O(""),n=O(!1),i=O(!1),a=O(null);Fe(()=>{_e.currentUserId?H.loadForUser(_e.currentUserId):H.clearForNoUser()});function o(E){_e.selectUser(E),ie.stop()}function d(E){_e.addUser(E),ie.stop()}function v(){H.currentScenario&&ie.play(H.currentScenario.messages)}function u(){ie.pause()}function w(){ie.stop()}function S(E,K){H.addMessage(E,K)}function m(E){H.selectMessage(E)}function b(E){H.removeMessage(E)}function y(E,K){H.updateColumn(E,K)}function c(E){H.selectedMessageId&&(H.updateMessage(H.selectedMessageId,E),G.success("Message updated"))}function x(){const E=`Scenario ${H.scenarios.length+1}`;H.createScenario(E),G.success("New scenario created")}function _(E){H.selectScenario(E),ie.stop()}async function T(E){try{await H.deleteScenario(E),G.success("Scenario deleted")}catch(K){G.error(K instanceof Error?K.message:"Failed to delete scenario")}}function P(){H.clearScenario(),G.success("Scenario cleared")}function R(){H.currentScenario&&(g(r,H.currentScenario.name,!0),g(s,!0))}function C(){H.currentScenarioId&&l(r).trim()&&H.renameScenario(H.currentScenarioId,l(r).trim()),g(s,!1)}function D(){g(s,!1)}function j(){H.currentScenario&&g(n,!0)}function z(E){H.currentScenarioId&&(H.updateDescription(H.currentScenarioId,E),G.success("Description saved")),g(n,!1)}function A(){g(n,!1)}function k(E){g(a,E,!0),g(i,!0)}function U(){g(a,null),g(i,!0)}async function B(E){try{const K=l(a)!==null;await Ne.upsertSample(E),G.success(K?"Message sample updated":"Message sample created"),g(i,!1),g(a,null)}catch(K){G.error(K instanceof Error?K.message:"Failed to save message sample")}}function I(){g(i,!1),g(a,null)}async function J(E){try{await Ne.deleteSample(E),G.success("Message sample deleted"),g(i,!1),g(a,null)}catch(K){G.error(K instanceof Error?K.message:"Failed to delete message sample")}}function Y(E){E.target instanceof HTMLTextAreaElement||E.target instanceof HTMLInputElement||(E.key===" "&&(E.preventDefault(),ie.status==="playing"?u():v()),(E.key==="Delete"||E.key==="Backspace")&&H.selectedMessageId&&b(H.selectedMessageId),E.key==="Escape"&&(H.selectMessage(null),g(n,!1),g(i,!1)))}Fe(()=>{ie.status==="error"&&ie.errors.length&&ie.errors.forEach(E=>G.error(E))});var te=nn();ge("keydown",Kt,Y);var me=L(te);Qa(me,{position:"bottom-right"});var ue=M(me,2),Se=h(ue),Pe=h(Se),Ee=h(Pe);ha(Ee,{get users(){return _e.users},get currentUserId(){return _e.currentUserId},onSelect:o,onAdd:d});var tt=M(Ee,2);{var ut=E=>{var K=tn(),de=M(L(K),2);{let pe=Q(()=>!!H.currentScenario?.messages.length);Wr(de,{get state(){return ie.state},get hasMessages(){return l(pe)},onPlay:v,onPause:u,onStop:w})}var Re=M(de,2),Ve=h(Re);{var qe=pe=>{var Ke=$a(),Ue=L(Ke);Yt(Ue),Ue.__keydown=ke=>{ke.key==="Enter"&&C(),ke.key==="Escape"&&D()};var Le=M(Ue,2);Le.__click=C;var vt=h(Le);Qt(vt,{size:16}),f(Le);var ye=M(Le,2);ye.__click=D;var Oe=h(ye);Be(Oe,{size:16}),f(ye),Ze(Ue,()=>l(r),ke=>g(r,ke)),p(pe,Ke)},rt=pe=>{var Ke=V(),Ue=L(Ke);{var Le=ye=>{var Oe=Za(),ke=L(Oe),ls=h(ke,!0);f(ke);var at=M(ke,2);at.__click=R;var ds=h(at);nr(ds,{size:14}),f(at);var nt=M(at,2);nt.__click=j;var cs=h(nt);tr(cs,{size:14}),f(nt),W(()=>{$(ls,H.currentScenario.name),ve(nt,1,`rounded p-1 text-gray-400 hover:bg-gray-100 hover:text-gray-600
                ${H.currentScenario?.description?"text-blue-500":""}`)}),p(ye,Oe)},vt=ye=>{var Oe=en();p(ye,Oe)};F(Ue,ye=>{H.currentScenario?ye(Le):ye(vt,!1)},!0)}p(pe,Ke)};F(Ve,pe=>{l(s)?pe(qe):pe(rt,!1)})}f(Re),p(E,K)};F(tt,E=>{_e.currentUserId&&E(ut)})}f(Pe);var Ae=M(Pe,2),We=h(Ae);{var be=E=>{var K=sn(),de=L(K);de.__click=P;var Re=h(de);Et(Re,{size:14}),we(),f(de);var Ve=M(de,2);Yr(Ve,{get scenarios(){return H.scenarios},get currentScenarioId(){return H.currentScenarioId},onNew:x,onSelect:_,onDelete:T}),W(()=>de.disabled=!H.currentScenario?.messages.length),p(E,K)};F(We,E=>{_e.currentUserId&&E(be)})}f(Ae),f(Se);var st=M(Se,2),Je=h(st),ft=h(Je);Pr(ft,{onEditSample:k,onCreateSample:U}),f(Je);var Tt=M(Je,2),ss=h(Tt);{var rs=E=>{var K=rn();p(E,K)},as=E=>{var K=an(),de=L(K),Re=h(de);{let qe=Q(()=>H.currentScenario?.messages??[]),rt=Q(()=>ie.status==="playing");ca(Re,{get messages(){return l(qe)},get selectedMessageId(){return H.selectedMessageId},get currentColumn(){return ie.currentColumn},get completedColumns(){return ie.completedColumns},get isPlaying(){return l(rt)},get messageResults(){return ie.messageResults},onAddMessage:S,onSelectMessage:m,onDeleteMessage:b,onUpdateColumn:y})}f(de);var Ve=M(de,2);Vr(Ve,{minHeight:128,maxHeightRatio:.8,initialHeightRatio:.64,children:(qe,rt)=>{{let pe=Q(()=>H.selectedMessage?.payload??null);pr(qe,{get payload(){return l(pe)},onSave:c})}},$$slots:{default:!0}}),p(E,K)};F(ss,E=>{_e.currentUserId?E(as,!1):E(rs)})}f(Tt),f(st),f(ue);var Dt=M(ue,2);{var ns=E=>{{let K=Q(()=>H.currentScenario?.name??"Scenario"),de=Q(()=>H.currentScenario?.description??"");ur(E,{get title(){return l(K)},get description(){return l(de)},onSave:z,onClose:A})}};F(Dt,E=>{l(n)&&E(ns)})}var is=M(Dt,2);{var os=E=>{Hr(E,{get sample(){return l(a)},onSave:B,onDelete:J,onClose:I})};F(is,E=>{l(i)&&E(os)})}p(t,te),ee()}ce(["keydown","click"]);export{hn as component};
